
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Для Каждого СтрокаМассива Из Параметры.ПараметрыФормы Цикл
		
		НоваяСтрока = ТаблицаТоваров.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаМассива);
		
	КонецЦикла;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормыТаблицаТоваров

&НаКлиенте
Процедура ТаблицаТоваровПередНачаломИзменения(Элемент, Отказ)
	КоличествоДоИзменения = ТекущийЭлемент.ТекущиеДанные.КоличествоУпаковок;
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаТоваровПередОкончаниемРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования, Отказ)
	
	ТекущаяСтрока = ТекущийЭлемент.ТекущиеДанные;
	КоличествоДляВозврата = ТекущаяСтрока.КоличествоВЗаказе - ТекущаяСтрока.КоличествоУпаковокВВозвратах;
	
	Если КоличествоДляВозврата < ТекущаяСтрока.КоличествоУпаковок Тогда
		
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Не верно указано количество для возврата. Можно указать не более - " + КоличествоДляВозврата);
		Отказ = Истина;
		ТекущаяСтрока.КоличествоУпаковок = КоличествоДоИзменения;
		
	КонецЕсли;

КонецПроцедуры
#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Выбрать(Команда)

	Закрыть(ПолучитьТЗ());

КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция ПолучитьТЗ()
	
	Возврат ОбщегоНазначения.ТаблицаЗначенийВМассив(ТаблицаТоваров.Выгрузить());

КонецФункции

#КонецОбласти
