&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Заголовок = СокрЛП(Параметры.Номенклатура);
	Номенклатура   = Параметры.Номенклатура;
	Характеристика = Параметры.Характеристика;

	Если ТипЗнч(Параметры.ВедомостьИнвентаризационная) = Тип("ДанныеФормыКоллекция") Тогда

		ВедомостьИнвентаризационная.Загрузить(Параметры.ВедомостьИнвентаризационная.Выгрузить(
			Новый Структура("Номенклатура, Характеристика", Номенклатура, Характеристика)));

		Запрос = Новый Запрос(
		"ВЫБРАТЬ
		|	ВЫРАЗИТЬ(Товары.ВедомостьИнвентаризационная КАК Документ.ВедомостьИнвентаризационная) КАК ВедомостьИнвентаризационная
		|ПОМЕСТИТЬ Ведомости
		|ИЗ
		|	&Товары КАК Товары
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	Ведомости.ВедомостьИнвентаризационная,
		|	Ведомости.ВедомостьИнвентаризационная.Комментарий КАК Комментарий
		|ИЗ
		|	Ведомости КАК Ведомости"
		);
		Запрос.УстановитьПараметр("Товары", ВедомостьИнвентаризационная.Выгрузить(, "ВедомостьИнвентаризационная"));
		
		Выборка = Запрос.Выполнить().Выбрать();
		
		Пока Выборка.Следующий() Цикл

			СтрокиВОтборе = ВедомостьИнвентаризационная.НайтиСтроки(Новый Структура(
				"ВедомостьИнвентаризационная", Выборка.ВедомостьИнвентаризационная));

			Для каждого СтрокаТабличнойЧасти Из СтрокиВОтборе Цикл

				СтрокаТабличнойЧасти.Комментарий = СокрЛП(Выборка.Комментарий);

			КонецЦикла;

		КонецЦикла;

	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)


КонецПроцедуры

&НаКлиенте
Процедура ТоварыВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)

	Если Поле.Имя = "ТоварыВедомостьИнвентаризационная" Тогда

		ПараметрыФормы = Новый Структура(
			"Ключ, Номенклатура, Характеристика"
			, Элемент.ТекущиеДанные.ВедомостьИнвентаризационная
			, Номенклатура
			, Характеристика);
		ОткрытьФорму("Документ.ВедомостьИнвентаризационная.ФормаОбъекта", ПараметрыФормы, ЭтотОбъект);

	КонецЕсли;

КонецПроцедуры
