<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetUnion">
		<name>НаборДанныхЗапросы</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Магазин</dataPath>
			<field>Магазин</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:parentDimension>Склад</dcscom:parentDimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Продавец</dataPath>
			<field>Продавец</field>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Склад</dataPath>
			<field>Склад</field>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
			<inputParameters>
				<dcscor:item>
					<dcscor:parameter>СвязиПараметровВыбора</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:ChoiceParameterLinks">
						<dcscor:item>
							<dcscor:choiceParameter>Отбор.Магазин</dcscor:choiceParameter>
							<dcscor:value>Магазин</dcscor:value>
							<dcscor:mode xmlns:d8p1="http://v8.1c.ru/8.1/data/enterprise" xsi:type="d8p1:LinkedValueChangeMode">Clear</dcscor:mode>
						</dcscor:item>
					</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВаловаяПрибыль</dataPath>
			<field>ВаловаяПрибыль</field>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2; ЧГ=3,0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументПродажи</dataPath>
			<field>ДокументПродажи</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3; ЧГ=3,0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоПродаж</dataPath>
			<field>КоличествоПродаж</field>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3; ЧГ=3,0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатурнаяГруппа</dataPath>
			<field>НоменклатурнаяГруппа</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:parentDimension>Номенклатура</dcscom:parentDimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СебестоимостьСписания</dataPath>
			<field>СебестоимостьСписания</field>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2; ЧГ=3,0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПродаж</dataPath>
			<field>СуммаПродаж</field>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2; ЧГ=3,0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаСписания</dataPath>
			<field>СуммаСписания</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма списания в розн. ценах</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2; ЧГ=3,0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
			<role>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИдентификаторОтчета</dataPath>
			<field>ИдентификаторОтчета</field>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>30</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
			<availableValue>
				<value xsi:type="xs:string">НоменклатурнаяГруппа</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>По номенклатурным группам</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:string">Магазины</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>По магазинам</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:string">Детально</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Детально</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:string">ТоварнаяКатегория</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>По товарным категориям</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>АналитикаХозяйственнойОперации</dataPath>
			<field>АналитикаХозяйственнойОперации</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаВРозничныхЦенах</dataPath>
			<field>СуммаВРозничныхЦенах</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТоварнаяКатегория</dataPath>
			<field>ТоварнаяКатегория</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Марка</dataPath>
			<field>Марка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РегистраторСеб</dataPath>
			<field>РегистраторСеб</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Регистратор себ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>МагазинСеб</dataPath>
			<field>МагазинСеб</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Магазин себ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоОборот</dataPath>
			<field>КоличествоОборот</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СебестоимостьПродаж</dataPath>
			<field>СебестоимостьПродаж</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Себестоимость продаж</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>УслугаБанкаПериодПредоставления</dataPath>
			<field>УслугаБанкаПериодПредоставления</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтоимостьОборот</dataPath>
			<field>СтоимостьОборот</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Стоимость оборот</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Маржинальность</dataPath>
			<field>Маржинальность</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Период</dataPath>
			<field>Период</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаСкидки</dataPath>
			<field>СуммаСкидки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма скидки</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>УслугаБанка</dataPath>
			<field>УслугаБанка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СебестоимостьВключаетНДС</dataPath>
			<field>СебестоимостьВключаетНДС</field>
		</field>
		<item xsi:type="DataSetQuery">
			<name>ПричиныСписанияПоТоварнымГруппам</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>Магазин</dataPath>
				<field>Магазин</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Продавец</dataPath>
				<field>Продавец</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Склад</dataPath>
				<field>Склад</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВаловаяПрибыль</dataPath>
				<field>ВаловаяПрибыль</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПродажи</dataPath>
				<field>ДокументПродажи</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Количество</dataPath>
				<field>Количество</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоПродаж</dataPath>
				<field>КоличествоПродаж</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НоменклатурнаяГруппа</dataPath>
				<field>НоменклатурнаяГруппа</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьСписания</dataPath>
				<field>СебестоимостьСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаПродаж</dataPath>
				<field>СуммаПродаж</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаСписания</dataPath>
				<field>СуммаСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Характеристика</dataPath>
				<field>Характеристика</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ИдентификаторОтчета</dataPath>
				<field>ИдентификаторОтчета</field>
				<valueType>
					<v8:Type>xs:string</v8:Type>
					<v8:StringQualifiers>
						<v8:Length>30</v8:Length>
						<v8:AllowedLength>Variable</v8:AllowedLength>
					</v8:StringQualifiers>
				</valueType>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>АналитикаХозяйственнойОперации</dataPath>
				<field>АналитикаХозяйственнойОперации</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РегистраторСеб</dataPath>
				<field>РегистраторСеб</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор себ</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>МагазинСеб</dataPath>
				<field>МагазинСеб</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Магазин себ</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоОборот</dataPath>
				<field>КоличествоОборот</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьПродаж</dataPath>
				<field>СебестоимостьПродаж</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Себестоимость продаж</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>УслугаБанкаПериодПредоставления</dataPath>
				<field>УслугаБанкаПериодПредоставления</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СтоимостьОборот</dataPath>
				<field>СтоимостьОборот</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Стоимость оборот</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Маржинальность</dataPath>
				<field>Маржинальность</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Период</dataPath>
				<field>Период</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаСкидки</dataPath>
				<field>СуммаСкидки</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма скидки</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>УслугаБанка</dataPath>
				<field>УслугаБанка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьВключаетНДС</dataPath>
				<field>СебестоимостьВключаетНДС</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	Магазины.ПравилоЦенообразования КАК ПравилоЦенообразования,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновЦеныНоменклатуры
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	НЕ(Магазины.ИспользоватьПрименениеЦен
				И &amp;ИспользоватьПрименениеЦен)
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновДействующиеЦены
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	Магазины.ИспользоватьПрименениеЦен
	И &amp;ИспользоватьПрименениеЦен
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеновыеГруппы.ЦеноваяГруппа КАК ЦеноваяГруппа,
	ЦеновыеГруппы.ВидЦен КАК ВидЦен,
	ЦеновыеГруппы.Ссылка КАК ПравилоЦенообразования,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ЦеновыеГруппыПравила
ИЗ
	Справочник.ПравилаЦенообразования.ЦеновыеГруппы КАК ЦеновыеГруппы
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ЦеновыеГруппы.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования

ИНДЕКСИРОВАТЬ ПО
	ВидЦен,
	ЦеноваяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВидЦеныПравила.ВидЦен КАК ВидЦен,
	ВидЦеныПравила.Ссылка КАК ПравилоЦенообразования,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ВидЦеныПравила
ИЗ
	Справочник.ПравилаЦенообразования КАК ВидЦеныПравила
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ВидЦеныПравила.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.Количество КАК Количество,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Период КАК Период,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеИзРегистра
ИЗ
	(ВЫБРАТЬ
		ТоварыНаСкладах.Склад.Магазин КАК Магазин,
		ТоварыНаСкладах.Номенклатура КАК Номенклатура,
		ТоварыНаСкладах.Характеристика КАК Характеристика,
		СУММА(ВЫБОР
				КОГДА ТоварыНаСкладах.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
					ТОГДА ТоварыНаСкладах.Количество
				ИНАЧЕ -ТоварыНаСкладах.Количество
			КОНЕЦ) КАК Количество,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Период КАК Период
	ИЗ
		РегистрНакопления.ТоварыНаСкладах КАК ТоварыНаСкладах
	ГДЕ
		(ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеНаЗатраты)
				ИЛИ ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПоИнвентаризации))
		И ТоварыНаСкладах.Период &gt;= &amp;НачалоПериода
		И (ТоварыНаСкладах.Период &lt;= &amp;КонецПериода
				ИЛИ &amp;КонецПериода = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0))
		И НЕ ТоварыНаСкладах.Количество = 0
	
	СГРУППИРОВАТЬ ПО
		ТоварыНаСкладах.Номенклатура,
		ТоварыНаСкладах.Склад.Магазин,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Характеристика,
		ТоварыНаСкладах.Период) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СписанияиМаксимумыСебестоимости.Магазин КАК Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура КАК Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика КАК Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	СУММА(ВЫБОР
			КОГДА СписанияиМаксимумыСебестоимости.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(СебестоимостьНоменклатуры.Цена, 0)
		КОНЕЦ * СписанияиМаксимумыСебестоимости.Количество) КАК СебестоимостьСписания,
	СУММА(СписанияиМаксимумыСебестоимости.Количество) КАК Количество,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваров
ИЗ
	(ВЫБРАТЬ
		Списания.Магазин КАК Магазин,
		Списания.Номенклатура КАК Номенклатура,
		Списания.Характеристика КАК Характеристика,
		Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		Списания.Период КАК Период,
		СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
		СебестоимостьНоменклатуры.Период КАК ПериодСебестоимость,
		МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСебестоимость,
		Списания.Количество КАК Количество
	ИЗ
		(ВЫБРАТЬ
			Списания.Магазин КАК Магазин,
			Списания.Номенклатура КАК Номенклатура,
			Списания.Характеристика КАК Характеристика,
			Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			Списания.Период КАК Период,
			СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
			МАКСИМУМ(СебестоимостьНоменклатуры.Период) КАК ПериодСебестоимость,
			Списания.Количество КАК Количество
		ИЗ
			СписаниеИзРегистра КАК Списания
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО (Списания.Магазин = СебестоимостьНоменклатуры.Магазин
						ИЛИ СебестоимостьНоменклатуры.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
					И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И Списания.Период &gt;= СебестоимостьНоменклатуры.Период
		
		СГРУППИРОВАТЬ ПО
			СебестоимостьНоменклатуры.Магазин,
			Списания.Магазин,
			Списания.Номенклатура,
			Списания.Характеристика,
			Списания.АналитикаХозяйственнойОперации,
			Списания.Период,
			Списания.Количество) КАК Списания
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
			ПО Списания.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
				И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
				И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
				И Списания.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
	
	СГРУППИРОВАТЬ ПО
		СебестоимостьНоменклатуры.Магазин,
		Списания.Магазин,
		Списания.Номенклатура,
		Списания.Характеристика,
		Списания.АналитикаХозяйственнойОперации,
		Списания.Период,
		Списания.Количество,
		СебестоимостьНоменклатуры.Период) КАК СписанияиМаксимумыСебестоимости
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
		ПО СписанияиМаксимумыСебестоимости.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
			И СписанияиМаксимумыСебестоимости.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
			И СписанияиМаксимумыСебестоимости.Характеристика = СебестоимостьНоменклатуры.Характеристика
			И СписанияиМаксимумыСебестоимости.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
			И СписанияиМаксимумыСебестоимости.РегистраторСебестоимость = СебестоимостьНоменклатуры.Регистратор

СГРУППИРОВАТЬ ПО
	СписанияиМаксимумыСебестоимости.Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.СуммаВРозничныхЦенах КАК СуммаВРозничныхЦенах,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СуммаЦенРозничных
ИЗ
	(ВЫБРАТЬ
		ВложенныйЗапрос.Магазин КАК Магазин,
		ВложенныйЗапрос.Номенклатура КАК Номенклатура,
		ВложенныйЗапрос.Характеристика КАК Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СУММА(ВложенныйЗапрос.Количество * ВЫБОР
				КОГДА РозничныеЦены2.Цена ЕСТЬ NULL
					ТОГДА 0
				ИНАЧЕ ВЫБОР
						КОГДА ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0) = 0
							ТОГДА РозничныеЦены2.Цена
						ИНАЧЕ РозничныеЦены2.Цена / ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0)
					КОНЕЦ
			КОНЕЦ) КАК СуммаВРозничныхЦенах
	ИЗ
		(ВЫБРАТЬ
			СписаниеИзРегистра.Магазин КАК Магазин,
			СписаниеИзРегистра.Номенклатура КАК Номенклатура,
			СписаниеИзРегистра.Характеристика КАК Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Количество КАК Количество,
			СписаниеИзРегистра.Период КАК Период,
			МАКСИМУМ(РозничныеЦены.Период) КАК ПериодИзРегистра
		ИЗ
			СписаниеИзРегистра КАК СписаниеИзРегистра
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
					ИтоговыйЗапрос.Магазин КАК Магазин,
					ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
					ИтоговыйЗапрос.Характеристика КАК Характеристика,
					ИтоговыйЗапрос.Упаковка КАК Упаковка,
					ИтоговыйЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ПодЗапрос.Магазин КАК Магазин,
						ПодЗапрос.Номенклатура КАК Номенклатура,
						ПодЗапрос.Характеристика КАК Характеристика,
						ПодЗапрос.Упаковка КАК Упаковка,
						ВЫБОР
							КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
								ТОГДА МАКСИМУМ(ПодЗапрос.ПериодПоЦеновымГруппам)
							ИНАЧЕ МАКСИМУМ(ПодЗапрос.ПериодПоВидуЦен)
						КОНЕЦ КАК Период
					ИЗ
						(ВЫБРАТЬ
							ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
							ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
							ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
							ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
							0 КАК ЦенаПоЦеновымГруппам,
							ТаблицаМагазинов.Магазин КАК Магазин,
							ЦеныНоменклатурыПоВидуЦен.Период КАК ПериодПоВидуЦен,
							ДАТАВРЕМЯ(1, 1, 1) КАК ПериодПоЦеновымГруппам
						ИЗ
							РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
								ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
						
						ОБЪЕДИНИТЬ ВСЕ
						
						ВЫБРАТЬ
							СправочникНоменклатура.Ссылка,
							ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
							ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
							0,
							ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
							ТаблицаМагазинов.Магазин,
							ДАТАВРЕМЯ(1, 1, 1),
							ЦеныНоменклатурыПоЦеновымГруппам.Период
						ИЗ
							ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
								ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
								ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
									ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
										ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
									ИЗ
										ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
									ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
								ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
									И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
					
					СГРУППИРОВАТЬ ПО
						ПодЗапрос.Номенклатура,
						ПодЗапрос.Характеристика,
						ПодЗапрос.Упаковка,
						ПодЗапрос.Магазин
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						ДействующиеЦены.ОбъектЦенообразования,
						ДействующиеЦены.Номенклатура,
						ДействующиеЦены.Характеристика,
						ДействующиеЦены.Упаковка,
						ДействующиеЦены.Период
					ИЗ
						РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
								ТаблицаМагазинов.Магазин КАК Магазин
							ИЗ
								ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
							ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены
				ПО СписаниеИзРегистра.Магазин = РозничныеЦены.Магазин
					И СписаниеИзРегистра.Номенклатура = РозничныеЦены.Номенклатура
					И СписаниеИзРегистра.Характеристика = РозничныеЦены.Характеристика
					И СписаниеИзРегистра.Период &gt;= РозничныеЦены.Период
		
		СГРУППИРОВАТЬ ПО
			СписаниеИзРегистра.Магазин,
			СписаниеИзРегистра.Номенклатура,
			СписаниеИзРегистра.Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Период,
			СписаниеИзРегистра.Количество) КАК ВложенныйЗапрос
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				ИтоговыйЗапрос.Магазин КАК Магазин,
				ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
				ИтоговыйЗапрос.Характеристика КАК Характеристика,
				ИтоговыйЗапрос.Упаковка КАК Упаковка,
				ИтоговыйЗапрос.Цена КАК Цена,
				ИтоговыйЗапрос.Период КАК Период
			ИЗ
				(ВЫБРАТЬ
					ПодЗапрос.Магазин КАК Магазин,
					ПодЗапрос.Номенклатура КАК Номенклатура,
					ПодЗапрос.Характеристика КАК Характеристика,
					ПодЗапрос.Упаковка КАК Упаковка,
					ВЫБОР
						КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
							ТОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам)
						ИНАЧЕ МАКСИМУМ(ПодЗапрос.ЦенаПоВидуЦен)
					КОНЕЦ КАК Цена,
					ПодЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
						ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
						ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
						ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
						0 КАК ЦенаПоЦеновымГруппам,
						ТаблицаМагазинов.Магазин КАК Магазин,
						ЦеныНоменклатурыПоВидуЦен.Период КАК Период
					ИЗ
						РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
							ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СправочникНоменклатура.Ссылка,
						ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
						ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
						0,
						ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
						ТаблицаМагазинов.Магазин,
						ЦеныНоменклатурыПоЦеновымГруппам.Период
					ИЗ
						ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
							ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
							ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
									ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
								ИЗ
									ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
								ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
							ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
								И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
				
				СГРУППИРОВАТЬ ПО
					ПодЗапрос.Номенклатура,
					ПодЗапрос.Характеристика,
					ПодЗапрос.Упаковка,
					ПодЗапрос.Магазин,
					ПодЗапрос.Период
				
				ОБЪЕДИНИТЬ ВСЕ
				
				ВЫБРАТЬ
					ДействующиеЦены.ОбъектЦенообразования,
					ДействующиеЦены.Номенклатура,
					ДействующиеЦены.Характеристика,
					ДействующиеЦены.Упаковка,
					ДействующиеЦены.Цена,
					ДействующиеЦены.Период
				ИЗ
					РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
							ТаблицаМагазинов.Магазин КАК Магазин
						ИЗ
							ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
						ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
						ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
							И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены2
			ПО ВложенныйЗапрос.Магазин = РозничныеЦены2.Магазин
				И ВложенныйЗапрос.Номенклатура = РозничныеЦены2.Номенклатура
				И ВложенныйЗапрос.Характеристика = РозничныеЦены2.Характеристика
				И ВложенныйЗапрос.ПериодИзРегистра = РозничныеЦены2.Период
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Магазин,
		ВложенныйЗапрос.Номенклатура,
		ВложенныйЗапрос.Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Номенклатура.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	СУММА(ВложенныйЗапрос.СебестоимостьСписания) КАК СебестоимостьСписания,
	СУММА(ВложенныйЗапрос.Количество) КАК Количество,
	СУММА(ВложенныйЗапрос.СуммаВРозничныхЦенах) КАК СуммаВРозничныхЦенах,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваровОбщее
ИЗ
	(ВЫБРАТЬ
		СписаниеТоваров.Магазин КАК Магазин,
		СписаниеТоваров.Номенклатура КАК Номенклатура,
		СписаниеТоваров.Характеристика КАК Характеристика,
		СписаниеТоваров.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СписаниеТоваров.СебестоимостьСписания КАК СебестоимостьСписания,
		СписаниеТоваров.Количество КАК Количество,
		0 КАК СуммаВРозничныхЦенах
	ИЗ
		СписаниеТоваров КАК СписаниеТоваров
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		СуммаЦенРозничных.Магазин,
		СуммаЦенРозничных.Номенклатура,
		СуммаЦенРозничных.Характеристика,
		СуммаЦенРозничных.АналитикаХозяйственнойОперации,
		0,
		0,
		СуммаЦенРозничных.СуммаВРозничныхЦенах
	ИЗ
		СуммаЦенРозничных КАК СуммаЦенРозничных) КАК ВложенныйЗапрос

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Номенклатура.НоменклатурнаяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЕСТЬNULL(СписаниеТоваровОбщее.СебестоимостьСписания, 0) КАК СебестоимостьСписания,
	ЕСТЬNULL(СписаниеТоваровОбщее.Количество, 0) КАК Количество,
	ЕСТЬNULL(Продажи.КоличествоОборот, 0) КАК КоличествоПродаж,
	СписаниеТоваровОбщее.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ЕСТЬNULL(Продажи.НоменклатурнаяГруппа, СписаниеТоваровОбщее.НоменклатурнаяГруппа) КАК НоменклатурнаяГруппа,
	ЕСТЬNULL(СписаниеТоваровОбщее.СуммаВРозничныхЦенах, 0) КАК СуммаСписания,
	ЕСТЬNULL(Продажи.ВаловаяПрибыль, 0) КАК ВаловаяПрибыль,
	ЕСТЬNULL(Продажи.СтоимостьОборот, 0) КАК СуммаПродаж,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ИЗ
	СписаниеТоваровОбщее КАК СписаниеТоваровОбщее
		ПОЛНОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВложенныйЗапрос.Номенклатура.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
			СУММА(ВложенныйЗапрос.КоличествоОборот) КАК КоличествоОборот,
			СУММА(ВложенныйЗапрос.СтоимостьОборот) КАК СтоимостьОборот,
			СУММА(ЕСТЬNULL(ВЫБОР
						КОГДА ВложенныйЗапрос.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
							ТОГДА 0
						ИНАЧЕ СебестоимостьНоменклатуры.Цена
					КОНЕЦ, 0) * ВложенныйЗапрос.КоличествоОборот) КАК СебестоимостьПродаж,
			СУММА(ВложенныйЗапрос.СтоимостьОборот - ЕСТЬNULL(ВЫБОР
						КОГДА ВложенныйЗапрос.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
							ТОГДА 0
						ИНАЧЕ СебестоимостьНоменклатуры.Цена
					КОНЕЦ, 0) * ВложенныйЗапрос.КоличествоОборот) КАК ВаловаяПрибыль
		ИЗ
			(ВЫБРАТЬ
				МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСеб,
				ВложенныйЗапрос.Номенклатура КАК Номенклатура,
				ВложенныйЗапрос.Характеристика КАК Характеристика,
				ВложенныйЗапрос.КоличествоОборот КАК КоличествоОборот,
				ВложенныйЗапрос.СтоимостьОборот КАК СтоимостьОборот,
				ВложенныйЗапрос.Магазин КАК Магазин,
				ВложенныйЗапрос.МагазинСеб КАК МагазинСеб,
				ВложенныйЗапрос.Регистратор КАК Регистратор
			ИЗ
				(ВЫБРАТЬ
					МАКСИМУМ(СебестоимостьНоменклатурыПоПериодам.Период) КАК Период,
					СебестоимостьНоменклатурыПоПериодам.Регистратор КАК РегистраторСеб,
					ПродажиОбороты.Номенклатура КАК Номенклатура,
					ПродажиОбороты.Характеристика КАК Характеристика,
					ПродажиОбороты.КоличествоОборот КАК КоличествоОборот,
					ПродажиОбороты.СтоимостьОборот КАК СтоимостьОборот,
					ПродажиОбороты.Магазин КАК Магазин,
					ПродажиОбороты.Регистратор КАК Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Магазин КАК МагазинСеб
				ИЗ
					(ВЫБРАТЬ
						ПродажиОборотыСМагазином.Номенклатура КАК Номенклатура,
						ПродажиОборотыСМагазином.Характеристика КАК Характеристика,
						ПродажиОборотыСМагазином.КоличествоОборот КАК КоличествоОборот,
						ВЫБОР
							КОГДА Константы.СебестоимостьВключаетНДС
									ИЛИ НЕ Константы.ИспользоватьУчетСебестоимости
								ТОГДА ПродажиОборотыСМагазином.СтоимостьОборот
							ИНАЧЕ ПродажиОборотыСМагазином.СтоимостьОборот - ПродажиОборотыСМагазином.НДСОборот
						КОНЕЦ КАК СтоимостьОборот,
						ПродажиОборотыСМагазином.Период КАК Период,
						ПродажиОборотыСМагазином.Регистратор КАК Регистратор,
						ПродажиОборотыСМагазином.Склад.Магазин КАК Магазин,
						Константы.СебестоимостьВключаетНДС КАК СебестоимостьВключаетНДС,
						ПродажиОборотыСМагазином.СтоимостьБезСкидокОборот - ПродажиОборотыСМагазином.СтоимостьОборот КАК СуммаСкидки
					ИЗ
						РегистрНакопления.Продажи.Обороты(&amp;НачалоПериода, &amp;КонецПериода, Регистратор, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (Продавец).* КАК Продавец, (Склад.Магазин).* КАК Магазин}) КАК ПродажиОборотыСМагазином,
						Константы КАК Константы) КАК ПродажиОбороты
						ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатурыПоПериодам
						ПО ПродажиОбороты.Период &gt;= СебестоимостьНоменклатурыПоПериодам.Период
							И ПродажиОбороты.Номенклатура = СебестоимостьНоменклатурыПоПериодам.Номенклатура
							И ПродажиОбороты.Характеристика = СебестоимостьНоменклатурыПоПериодам.Характеристика
							И (ПродажиОбороты.Магазин = СебестоимостьНоменклатурыПоПериодам.Магазин
								ИЛИ СебестоимостьНоменклатурыПоПериодам.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
				
				СГРУППИРОВАТЬ ПО
					ПродажиОбороты.Номенклатура,
					ПродажиОбороты.Характеристика,
					ПродажиОбороты.КоличествоОборот,
					ПродажиОбороты.СтоимостьОборот,
					ПродажиОбороты.Магазин,
					ПродажиОбороты.Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Магазин) КАК ВложенныйЗапрос
					ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
					ПО ВложенныйЗапрос.Период = СебестоимостьНоменклатуры.Период
						И ВложенныйЗапрос.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
						И ВложенныйЗапрос.Характеристика = СебестоимостьНоменклатуры.Характеристика
						И ВложенныйЗапрос.МагазинСеб = СебестоимостьНоменклатуры.Магазин
			
			СГРУППИРОВАТЬ ПО
				ВложенныйЗапрос.Номенклатура,
				ВложенныйЗапрос.Характеристика,
				ВложенныйЗапрос.КоличествоОборот,
				ВложенныйЗапрос.СтоимостьОборот,
				ВложенныйЗапрос.Магазин,
				ВложенныйЗапрос.МагазинСеб,
				ВложенныйЗапрос.Регистратор) КАК ВложенныйЗапрос
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО ВложенныйЗапрос.РегистраторСеб = СебестоимостьНоменклатуры.Регистратор
					И ВложенныйЗапрос.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И ВложенныйЗапрос.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И ВложенныйЗапрос.МагазинСеб = СебестоимостьНоменклатуры.Магазин
		ГДЕ
			(ВложенныйЗапрос.КоличествоОборот &lt;&gt; 0
					ИЛИ ВложенныйЗапрос.СтоимостьОборот &lt;&gt; 0)
		
		СГРУППИРОВАТЬ ПО
			ВложенныйЗапрос.Номенклатура.НоменклатурнаяГруппа) КАК Продажи
		ПО СписаниеТоваровОбщее.НоменклатурнаяГруппа = Продажи.НоменклатурнаяГруппа</query>
		</item>
		<item xsi:type="DataSetQuery">
			<name>ПричиныСписанияПоМагазинам</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>Магазин</dataPath>
				<field>Магазин</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Продавец</dataPath>
				<field>Продавец</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Склад</dataPath>
				<field>Склад</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВаловаяПрибыль</dataPath>
				<field>ВаловаяПрибыль</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПродажи</dataPath>
				<field>ДокументПродажи</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Количество</dataPath>
				<field>Количество</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоПродаж</dataPath>
				<field>КоличествоПродаж</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьСписания</dataPath>
				<field>СебестоимостьСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаПродаж</dataPath>
				<field>СуммаПродаж</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаСписания</dataPath>
				<field>СуммаСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Характеристика</dataPath>
				<field>Характеристика</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ИдентификаторОтчета</dataPath>
				<field>ИдентификаторОтчета</field>
				<valueType>
					<v8:Type>xs:string</v8:Type>
					<v8:StringQualifiers>
						<v8:Length>30</v8:Length>
						<v8:AllowedLength>Variable</v8:AllowedLength>
					</v8:StringQualifiers>
				</valueType>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>АналитикаХозяйственнойОперации</dataPath>
				<field>АналитикаХозяйственнойОперации</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РегистраторСеб</dataPath>
				<field>РегистраторСеб</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор себ</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>МагазинСеб</dataPath>
				<field>МагазинСеб</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Магазин себ</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоОборот</dataPath>
				<field>КоличествоОборот</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьПродаж</dataPath>
				<field>СебестоимостьПродаж</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Себестоимость продаж</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>УслугаБанкаПериодПредоставления</dataPath>
				<field>УслугаБанкаПериодПредоставления</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СтоимостьОборот</dataPath>
				<field>СтоимостьОборот</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Стоимость оборот</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Маржинальность</dataPath>
				<field>Маржинальность</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Период</dataPath>
				<field>Период</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаСкидки</dataPath>
				<field>СуммаСкидки</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма скидки</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>УслугаБанка</dataPath>
				<field>УслугаБанка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьВключаетНДС</dataPath>
				<field>СебестоимостьВключаетНДС</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	Магазины.ПравилоЦенообразования КАК ПравилоЦенообразования,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновЦеныНоменклатуры
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	(НЕ (Магазины.ИспользоватьПрименениеЦен
			И &amp;ИспользоватьПрименениеЦен))
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновДействующиеЦены
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	Магазины.ИспользоватьПрименениеЦен
	И &amp;ИспользоватьПрименениеЦен
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеновыеГруппы.ЦеноваяГруппа КАК ЦеноваяГруппа,
	ЦеновыеГруппы.ВидЦен КАК ВидЦен,
	ЦеновыеГруппы.Ссылка КАК ПравилоЦенообразования,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ЦеновыеГруппыПравила
ИЗ
	Справочник.ПравилаЦенообразования.ЦеновыеГруппы КАК ЦеновыеГруппы
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ЦеновыеГруппы.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования

ИНДЕКСИРОВАТЬ ПО
	ВидЦен,
	ЦеноваяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВидЦеныПравила.ВидЦен КАК ВидЦен,
	ВидЦеныПравила.Ссылка КАК ПравилоЦенообразования,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ВидЦеныПравила
ИЗ
	Справочник.ПравилаЦенообразования КАК ВидЦеныПравила
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ВидЦеныПравила.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин,
	ВложенныйЗапрос.Номенклатура,
	ВложенныйЗапрос.Характеристика,
	ВложенныйЗапрос.Количество,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Период,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеИзРегистра
ИЗ
	(ВЫБРАТЬ
		ТоварыНаСкладах.Склад.Магазин КАК Магазин,
		ТоварыНаСкладах.Номенклатура КАК Номенклатура,
		ТоварыНаСкладах.Характеристика КАК Характеристика,
		СУММА(ВЫБОР
				КОГДА ТоварыНаСкладах.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
					ТОГДА ТоварыНаСкладах.Количество
				ИНАЧЕ -ТоварыНаСкладах.Количество
			КОНЕЦ) КАК Количество,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Период КАК Период
	ИЗ
		РегистрНакопления.ТоварыНаСкладах КАК ТоварыНаСкладах
	ГДЕ
		(ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеНаЗатраты)
				ИЛИ ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПоИнвентаризации))
		И ТоварыНаСкладах.Период &gt;= &amp;НачалоПериода
		И (ТоварыНаСкладах.Период &lt;= &amp;КонецПериода
				ИЛИ &amp;КонецПериода = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0))
		И (НЕ ТоварыНаСкладах.Количество = 0)
	
	СГРУППИРОВАТЬ ПО
		ТоварыНаСкладах.Номенклатура,
		ТоварыНаСкладах.Склад.Магазин,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Характеристика,
		ТоварыНаСкладах.Период) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СписанияиМаксимумыСебестоимости.Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации,
	СУММА(ВЫБОР
			КОГДА СписанияиМаксимумыСебестоимости.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(СебестоимостьНоменклатуры.Цена, 0)
		КОНЕЦ * СписанияиМаксимумыСебестоимости.Количество) КАК СебестоимостьСписания,
	СУММА(СписанияиМаксимумыСебестоимости.Количество) КАК Количество,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваров
ИЗ
	(ВЫБРАТЬ
		Списания.Магазин КАК Магазин,
		Списания.Номенклатура КАК Номенклатура,
		Списания.Характеристика КАК Характеристика,
		Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		Списания.Период КАК Период,
		СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
		СебестоимостьНоменклатуры.Период КАК ПериодСебестоимость,
		МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСебестоимость,
		Списания.Количество КАК Количество
	ИЗ
		(ВЫБРАТЬ
			Списания.Магазин КАК Магазин,
			Списания.Номенклатура КАК Номенклатура,
			Списания.Характеристика КАК Характеристика,
			Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			Списания.Период КАК Период,
			СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
			МАКСИМУМ(СебестоимостьНоменклатуры.Период) КАК ПериодСебестоимость,
			Списания.Количество КАК Количество
		ИЗ
			СписаниеИзРегистра КАК Списания
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО (Списания.Магазин = СебестоимостьНоменклатуры.Магазин
						ИЛИ СебестоимостьНоменклатуры.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
					И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И Списания.Период &gt;= СебестоимостьНоменклатуры.Период
		
		СГРУППИРОВАТЬ ПО
			СебестоимостьНоменклатуры.Магазин,
			Списания.Магазин,
			Списания.Номенклатура,
			Списания.Характеристика,
			Списания.АналитикаХозяйственнойОперации,
			Списания.Период,
			Списания.Количество) КАК Списания
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
			ПО Списания.Магазин = СебестоимостьНоменклатуры.Магазин
				И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
				И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
				И Списания.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
	
	СГРУППИРОВАТЬ ПО
		СебестоимостьНоменклатуры.Магазин,
		Списания.Магазин,
		Списания.Номенклатура,
		Списания.Характеристика,
		Списания.АналитикаХозяйственнойОперации,
		Списания.Период,
		Списания.Количество,
		СебестоимостьНоменклатуры.Период) КАК СписанияиМаксимумыСебестоимости
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
		ПО СписанияиМаксимумыСебестоимости.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
			И СписанияиМаксимумыСебестоимости.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
			И СписанияиМаксимумыСебестоимости.Характеристика = СебестоимостьНоменклатуры.Характеристика
			И СписанияиМаксимумыСебестоимости.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
			И СписанияиМаксимумыСебестоимости.РегистраторСебестоимость = СебестоимостьНоменклатуры.Регистратор

СГРУППИРОВАТЬ ПО
	СписанияиМаксимумыСебестоимости.Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин,
	ВложенныйЗапрос.Номенклатура,
	ВложенныйЗапрос.Характеристика,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.СуммаВРозничныхЦенах,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СуммаЦенРозничных
ИЗ
	(ВЫБРАТЬ
		ВложенныйЗапрос.Магазин КАК Магазин,
		ВложенныйЗапрос.Номенклатура КАК Номенклатура,
		ВложенныйЗапрос.Характеристика КАК Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СУММА(ВложенныйЗапрос.Количество * ВЫБОР
				КОГДА РозничныеЦены2.Цена ЕСТЬ NULL 
					ТОГДА 0
				ИНАЧЕ ВЫБОР
						КОГДА ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0) = 0
							ТОГДА РозничныеЦены2.Цена
						ИНАЧЕ РозничныеЦены2.Цена / ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0)
					КОНЕЦ
			КОНЕЦ) КАК СуммаВРозничныхЦенах
	ИЗ
		(ВЫБРАТЬ
			СписаниеИзРегистра.Магазин КАК Магазин,
			СписаниеИзРегистра.Номенклатура КАК Номенклатура,
			СписаниеИзРегистра.Характеристика КАК Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Количество КАК Количество,
			СписаниеИзРегистра.Период КАК Период,
			МАКСИМУМ(РозничныеЦены.Период) КАК ПериодИзРегистра
		ИЗ
			СписаниеИзРегистра КАК СписаниеИзРегистра
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
					ИтоговыйЗапрос.Магазин КАК Магазин,
					ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
					ИтоговыйЗапрос.Характеристика КАК Характеристика,
					ИтоговыйЗапрос.Упаковка КАК Упаковка,
					ИтоговыйЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ПодЗапрос.Магазин КАК Магазин,
						ПодЗапрос.Номенклатура КАК Номенклатура,
						ПодЗапрос.Характеристика КАК Характеристика,
						ПодЗапрос.Упаковка КАК Упаковка,
						ВЫБОР
							КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
								ТОГДА МАКСИМУМ(ПодЗапрос.ПериодПоЦеновымГруппам)
							ИНАЧЕ МАКСИМУМ(ПодЗапрос.ПериодПоВидуЦен)
						КОНЕЦ КАК Период
					ИЗ
						(ВЫБРАТЬ
							ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
							ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
							ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
							ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
							0 КАК ЦенаПоЦеновымГруппам,
							ТаблицаМагазинов.Магазин КАК Магазин,
							ЦеныНоменклатурыПоВидуЦен.Период КАК ПериодПоВидуЦен,
							ДАТАВРЕМЯ(1, 1, 1) КАК ПериодПоЦеновымГруппам
						ИЗ
							РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
								ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
						
						ОБЪЕДИНИТЬ ВСЕ
						
						ВЫБРАТЬ
							СправочникНоменклатура.Ссылка,
							ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
							ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
							0,
							ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
							ТаблицаМагазинов.Магазин,
							ДАТАВРЕМЯ(1, 1, 1),
							ЦеныНоменклатурыПоЦеновымГруппам.Период
						ИЗ
							ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
								ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
								ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
									ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
										ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
									ИЗ
										ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
									ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
								ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
									И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
					
					СГРУППИРОВАТЬ ПО
						ПодЗапрос.Номенклатура,
						ПодЗапрос.Характеристика,
						ПодЗапрос.Упаковка,
						ПодЗапрос.Магазин
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						ДействующиеЦены.ОбъектЦенообразования,
						ДействующиеЦены.Номенклатура,
						ДействующиеЦены.Характеристика,
						ДействующиеЦены.Упаковка,
						ДействующиеЦены.Период
					ИЗ
						РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
								ТаблицаМагазинов.Магазин КАК Магазин
							ИЗ
								ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
							ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены
				ПО СписаниеИзРегистра.Магазин = РозничныеЦены.Магазин
					И СписаниеИзРегистра.Номенклатура = РозничныеЦены.Номенклатура
					И СписаниеИзРегистра.Характеристика = РозничныеЦены.Характеристика
					И СписаниеИзРегистра.Период &gt;= РозничныеЦены.Период
		
		СГРУППИРОВАТЬ ПО
			СписаниеИзРегистра.Магазин,
			СписаниеИзРегистра.Номенклатура,
			СписаниеИзРегистра.Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Период,
			СписаниеИзРегистра.Количество) КАК ВложенныйЗапрос
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				ИтоговыйЗапрос.Магазин КАК Магазин,
				ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
				ИтоговыйЗапрос.Характеристика КАК Характеристика,
				ИтоговыйЗапрос.Упаковка КАК Упаковка,
				ИтоговыйЗапрос.Цена КАК Цена,
				ИтоговыйЗапрос.Период КАК Период
			ИЗ
				(ВЫБРАТЬ
					ПодЗапрос.Магазин КАК Магазин,
					ПодЗапрос.Номенклатура КАК Номенклатура,
					ПодЗапрос.Характеристика КАК Характеристика,
					ПодЗапрос.Упаковка КАК Упаковка,
					ВЫБОР
						КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
							ТОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам)
						ИНАЧЕ МАКСИМУМ(ПодЗапрос.ЦенаПоВидуЦен)
					КОНЕЦ КАК Цена,
					ПодЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
						ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
						ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
						ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
						0 КАК ЦенаПоЦеновымГруппам,
						ТаблицаМагазинов.Магазин КАК Магазин,
						ЦеныНоменклатурыПоВидуЦен.Период КАК Период
					ИЗ
						РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
							ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СправочникНоменклатура.Ссылка,
						ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
						ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
						0,
						ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
						ТаблицаМагазинов.Магазин,
						ЦеныНоменклатурыПоЦеновымГруппам.Период
					ИЗ
						ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
							ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
							ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
									ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
								ИЗ
									ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
								ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
							ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
								И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
				
				СГРУППИРОВАТЬ ПО
					ПодЗапрос.Номенклатура,
					ПодЗапрос.Характеристика,
					ПодЗапрос.Упаковка,
					ПодЗапрос.Магазин,
					ПодЗапрос.Период
				
				ОБЪЕДИНИТЬ ВСЕ
				
				ВЫБРАТЬ
					ДействующиеЦены.ОбъектЦенообразования,
					ДействующиеЦены.Номенклатура,
					ДействующиеЦены.Характеристика,
					ДействующиеЦены.Упаковка,
					ДействующиеЦены.Цена,
					ДействующиеЦены.Период
				ИЗ
					РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
							ТаблицаМагазинов.Магазин КАК Магазин
						ИЗ
							ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
						ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
						ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
							И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены2
			ПО ВложенныйЗапрос.Магазин = РозничныеЦены2.Магазин
				И ВложенныйЗапрос.Номенклатура = РозничныеЦены2.Номенклатура
				И ВложенныйЗапрос.Характеристика = РозничныеЦены2.Характеристика
				И ВложенныйЗапрос.ПериодИзРегистра = РозничныеЦены2.Период
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Магазин,
		ВложенныйЗапрос.Номенклатура,
		ВложенныйЗапрос.Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	СУММА(ВложенныйЗапрос.СебестоимостьСписания) КАК СебестоимостьСписания,
	СУММА(ВложенныйЗапрос.Количество) КАК Количество,
	СУММА(ВложенныйЗапрос.СуммаВРозничныхЦенах) КАК СуммаВРозничныхЦенах,
	ВложенныйЗапрос.Магазин,
	"Магазины" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваровОбщее
ИЗ
	(ВЫБРАТЬ
		СписаниеТоваров.Магазин КАК Магазин,
		СписаниеТоваров.Номенклатура КАК Номенклатура,
		СписаниеТоваров.Характеристика КАК Характеристика,
		СписаниеТоваров.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СписаниеТоваров.СебестоимостьСписания КАК СебестоимостьСписания,
		СписаниеТоваров.Количество КАК Количество,
		0 КАК СуммаВРозничныхЦенах
	ИЗ
		СписаниеТоваров КАК СписаниеТоваров
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		СуммаЦенРозничных.Магазин,
		СуммаЦенРозничных.Номенклатура,
		СуммаЦенРозничных.Характеристика,
		СуммаЦенРозничных.АналитикаХозяйственнойОперации,
		0,
		0,
		СуммаЦенРозничных.СуммаВРозничныхЦенах
	ИЗ
		СуммаЦенРозничных КАК СуммаЦенРозничных) КАК ВложенныйЗапрос

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Магазин
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЕСТЬNULL(СписаниеТоваровОбщее.СебестоимостьСписания, 0) КАК СебестоимостьСписания,
	ЕСТЬNULL(СписаниеТоваровОбщее.Количество, 0) КАК Количество,
	ЕСТЬNULL(Продажи.КоличествоОборот, 0) КАК КоличествоПродаж,
	СписаниеТоваровОбщее.АналитикаХозяйственнойОперации,
	ЕСТЬNULL(Продажи.Магазин, СписаниеТоваровОбщее.Магазин) КАК Магазин,
	ЕСТЬNULL(СписаниеТоваровОбщее.СуммаВРозничныхЦенах, 0) КАК СуммаСписания,
	ЕСТЬNULL(Продажи.ВаловаяПрибыль, 0) КАК ВаловаяПрибыль,
	ЕСТЬNULL(Продажи.СтоимостьОборот, 0) КАК СуммаПродаж,
	"Магазины" КАК ИдентификаторОтчета
ИЗ
	СписаниеТоваровОбщее КАК СписаниеТоваровОбщее
		ПОЛНОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			СУММА(ВложенныйЗапрос.КоличествоОборот) КАК КоличествоОборот,
			СУММА(ВложенныйЗапрос.СтоимостьОборот) КАК СтоимостьОборот,
			СУММА(ЕСТЬNULL(ВЫБОР
						КОГДА ВложенныйЗапрос.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
							ТОГДА 0
						ИНАЧЕ СебестоимостьНоменклатуры.Цена
					КОНЕЦ, 0) * ВложенныйЗапрос.КоличествоОборот) КАК СебестоимостьПродаж,
			СУММА(ВложенныйЗапрос.СтоимостьОборот - ЕСТЬNULL(ВЫБОР
						КОГДА ВложенныйЗапрос.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
							ТОГДА 0
						ИНАЧЕ СебестоимостьНоменклатуры.Цена
					КОНЕЦ, 0) * ВложенныйЗапрос.КоличествоОборот) КАК ВаловаяПрибыль,
			ВложенныйЗапрос.Магазин КАК Магазин
		ИЗ
			(ВЫБРАТЬ
				МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСеб,
				ВложенныйЗапрос.Номенклатура КАК Номенклатура,
				ВложенныйЗапрос.Характеристика КАК Характеристика,
				ВложенныйЗапрос.КоличествоОборот КАК КоличествоОборот,
				ВложенныйЗапрос.СтоимостьОборот КАК СтоимостьОборот,
				ВложенныйЗапрос.Магазин КАК Магазин,
				ВложенныйЗапрос.МагазинСеб КАК МагазинСеб,
				ВложенныйЗапрос.Регистратор КАК Регистратор
			ИЗ
				(ВЫБРАТЬ
					МАКСИМУМ(СебестоимостьНоменклатурыПоПериодам.Период) КАК Период,
					СебестоимостьНоменклатурыПоПериодам.Регистратор КАК РегистраторСеб,
					ПродажиОбороты.Номенклатура КАК Номенклатура,
					ПродажиОбороты.Характеристика КАК Характеристика,
					ПродажиОбороты.КоличествоОборот КАК КоличествоОборот,
					ПродажиОбороты.СтоимостьОборот КАК СтоимостьОборот,
					ПродажиОбороты.Магазин КАК Магазин,
					ПродажиОбороты.Регистратор КАК Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Магазин КАК МагазинСеб
				ИЗ
					(ВЫБРАТЬ
						ПродажиОборотыСМагазином.Номенклатура КАК Номенклатура,
						ПродажиОборотыСМагазином.Характеристика КАК Характеристика,
						ПродажиОборотыСМагазином.КоличествоОборот КАК КоличествоОборот,
						ВЫБОР
							КОГДА (НЕ Константы.ИспользоватьУчетСебестоимости)
									ИЛИ Константы.СебестоимостьВключаетНДС
								ТОГДА ПродажиОборотыСМагазином.СтоимостьОборот
							ИНАЧЕ ПродажиОборотыСМагазином.СтоимостьОборот - ПродажиОборотыСМагазином.НДСОборот
						КОНЕЦ КАК СтоимостьОборот,
						ПродажиОборотыСМагазином.Период КАК Период,
						ПродажиОборотыСМагазином.Регистратор КАК Регистратор,
						ПродажиОборотыСМагазином.Склад.Магазин КАК Магазин,
						Константы.СебестоимостьВключаетНДС КАК СебестоимостьВключаетНДС,
						ПродажиОборотыСМагазином.СтоимостьБезСкидокОборот - ПродажиОборотыСМагазином.СтоимостьОборот КАК СуммаСкидки
					ИЗ
						РегистрНакопления.Продажи.Обороты(&amp;НачалоПериода, &amp;КонецПериода, Регистратор, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (Продавец).* КАК Продавец, (Склад.Магазин).* КАК Магазин}) КАК ПродажиОборотыСМагазином,
						Константы КАК Константы) КАК ПродажиОбороты
						ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатурыПоПериодам
						ПО ПродажиОбороты.Период &gt;= СебестоимостьНоменклатурыПоПериодам.Период
							И ПродажиОбороты.Номенклатура = СебестоимостьНоменклатурыПоПериодам.Номенклатура
							И ПродажиОбороты.Характеристика = СебестоимостьНоменклатурыПоПериодам.Характеристика
							И (ПродажиОбороты.Магазин = СебестоимостьНоменклатурыПоПериодам.Магазин
								ИЛИ СебестоимостьНоменклатурыПоПериодам.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
				
				СГРУППИРОВАТЬ ПО
					ПродажиОбороты.Номенклатура,
					ПродажиОбороты.Характеристика,
					ПродажиОбороты.КоличествоОборот,
					ПродажиОбороты.СтоимостьОборот,
					ПродажиОбороты.Магазин,
					ПродажиОбороты.Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Магазин) КАК ВложенныйЗапрос
					ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
					ПО ВложенныйЗапрос.Период = СебестоимостьНоменклатуры.Период
						И ВложенныйЗапрос.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
						И ВложенныйЗапрос.Характеристика = СебестоимостьНоменклатуры.Характеристика
						И ВложенныйЗапрос.МагазинСеб = СебестоимостьНоменклатуры.Магазин
			
			СГРУППИРОВАТЬ ПО
				ВложенныйЗапрос.Номенклатура,
				ВложенныйЗапрос.Характеристика,
				ВложенныйЗапрос.КоличествоОборот,
				ВложенныйЗапрос.СтоимостьОборот,
				ВложенныйЗапрос.Магазин,
				ВложенныйЗапрос.МагазинСеб,
				ВложенныйЗапрос.Регистратор) КАК ВложенныйЗапрос
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО ВложенныйЗапрос.РегистраторСеб = СебестоимостьНоменклатуры.Регистратор
					И ВложенныйЗапрос.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И ВложенныйЗапрос.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И ВложенныйЗапрос.МагазинСеб = СебестоимостьНоменклатуры.Магазин
		ГДЕ
			(ВложенныйЗапрос.КоличествоОборот &lt;&gt; 0
					ИЛИ ВложенныйЗапрос.СтоимостьОборот &lt;&gt; 0)
		
		СГРУППИРОВАТЬ ПО
			ВложенныйЗапрос.Магазин) КАК Продажи
		ПО СписаниеТоваровОбщее.Магазин = Продажи.Магазин</query>
		</item>
		<item xsi:type="DataSetQuery">
			<name>ПричиныСписанияДетально</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>Магазин</dataPath>
				<field>Магазин</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>АналитикаХозяйственнойОперации</dataPath>
				<field>АналитикаХозяйственнойОперации</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ИдентификаторОтчета</dataPath>
				<field>ИдентификаторОтчета</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Количество</dataPath>
				<field>Количество</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НоменклатурнаяГруппа</dataPath>
				<field>НоменклатурнаяГруппа</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьСписания</dataPath>
				<field>СебестоимостьСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаВРозничныхЦенах</dataPath>
				<field>СуммаВРозничныхЦенах</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Характеристика</dataPath>
				<field>Характеристика</field>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	Магазины.ПравилоЦенообразования КАК ПравилоЦенообразования,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновЦеныНоменклатуры
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	НЕ(Магазины.ИспользоватьПрименениеЦен
				И &amp;ИспользоватьПрименениеЦен)
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновДействующиеЦены
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	Магазины.ИспользоватьПрименениеЦен
	И &amp;ИспользоватьПрименениеЦен
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеновыеГруппы.ЦеноваяГруппа КАК ЦеноваяГруппа,
	ЦеновыеГруппы.ВидЦен КАК ВидЦен,
	ЦеновыеГруппы.Ссылка КАК ПравилоЦенообразования,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ЦеновыеГруппыПравила
ИЗ
	Справочник.ПравилаЦенообразования.ЦеновыеГруппы КАК ЦеновыеГруппы
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ЦеновыеГруппы.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования

ИНДЕКСИРОВАТЬ ПО
	ВидЦен,
	ЦеноваяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВидЦеныПравила.ВидЦен КАК ВидЦен,
	ВидЦеныПравила.Ссылка КАК ПравилоЦенообразования,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ВидЦеныПравила
ИЗ
	Справочник.ПравилаЦенообразования КАК ВидЦеныПравила
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ВидЦеныПравила.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.Количество КАК Количество,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Период КАК Период,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеИзРегистра
ИЗ
	(ВЫБРАТЬ
		ТоварыНаСкладах.Склад.Магазин КАК Магазин,
		ТоварыНаСкладах.Номенклатура КАК Номенклатура,
		ТоварыНаСкладах.Характеристика КАК Характеристика,
		СУММА(ВЫБОР
				КОГДА ТоварыНаСкладах.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
					ТОГДА ТоварыНаСкладах.Количество
				ИНАЧЕ -ТоварыНаСкладах.Количество
			КОНЕЦ) КАК Количество,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Период КАК Период
	ИЗ
		РегистрНакопления.ТоварыНаСкладах КАК ТоварыНаСкладах
	ГДЕ
		(ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеНаЗатраты)
				ИЛИ ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПоИнвентаризации))
		И ТоварыНаСкладах.Период &gt;= &amp;НачалоПериода
		И (ТоварыНаСкладах.Период &lt;= &amp;КонецПериода
				ИЛИ &amp;КонецПериода = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0))
		И НЕ ТоварыНаСкладах.Количество = 0
	
	СГРУППИРОВАТЬ ПО
		ТоварыНаСкладах.Номенклатура,
		ТоварыНаСкладах.Склад.Магазин,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Характеристика,
		ТоварыНаСкладах.Период) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СписанияиМаксимумыСебестоимости.Магазин КАК Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура КАК Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика КАК Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	СУММА(ВЫБОР
			КОГДА СписанияиМаксимумыСебестоимости.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(СебестоимостьНоменклатуры.Цена, 0)
		КОНЕЦ * СписанияиМаксимумыСебестоимости.Количество) КАК СебестоимостьСписания,
	СУММА(СписанияиМаксимумыСебестоимости.Количество) КАК Количество,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваров
ИЗ
	(ВЫБРАТЬ
		Списания.Магазин КАК Магазин,
		Списания.Номенклатура КАК Номенклатура,
		Списания.Характеристика КАК Характеристика,
		Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		Списания.Период КАК Период,
		СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
		СебестоимостьНоменклатуры.Период КАК ПериодСебестоимость,
		МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСебестоимость,
		Списания.Количество КАК Количество
	ИЗ
		(ВЫБРАТЬ
			Списания.Магазин КАК Магазин,
			Списания.Номенклатура КАК Номенклатура,
			Списания.Характеристика КАК Характеристика,
			Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			Списания.Период КАК Период,
			СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
			МАКСИМУМ(СебестоимостьНоменклатуры.Период) КАК ПериодСебестоимость,
			Списания.Количество КАК Количество
		ИЗ
			СписаниеИзРегистра КАК Списания
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО (Списания.Магазин = СебестоимостьНоменклатуры.Магазин
						ИЛИ СебестоимостьНоменклатуры.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
					И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И Списания.Период &gt;= СебестоимостьНоменклатуры.Период
		
		СГРУППИРОВАТЬ ПО
			СебестоимостьНоменклатуры.Магазин,
			Списания.Магазин,
			Списания.Номенклатура,
			Списания.Характеристика,
			Списания.АналитикаХозяйственнойОперации,
			Списания.Период,
			Списания.Количество) КАК Списания
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
			ПО Списания.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
				И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
				И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
				И Списания.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
	
	СГРУППИРОВАТЬ ПО
		СебестоимостьНоменклатуры.Магазин,
		Списания.Магазин,
		Списания.Номенклатура,
		Списания.Характеристика,
		Списания.АналитикаХозяйственнойОперации,
		Списания.Период,
		Списания.Количество,
		СебестоимостьНоменклатуры.Период) КАК СписанияиМаксимумыСебестоимости
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
		ПО СписанияиМаксимумыСебестоимости.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
			И СписанияиМаксимумыСебестоимости.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
			И СписанияиМаксимумыСебестоимости.Характеристика = СебестоимостьНоменклатуры.Характеристика
			И СписанияиМаксимумыСебестоимости.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
			И СписанияиМаксимумыСебестоимости.РегистраторСебестоимость = СебестоимостьНоменклатуры.Регистратор

СГРУППИРОВАТЬ ПО
	СписанияиМаксимумыСебестоимости.Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.СуммаВРозничныхЦенах КАК СуммаВРозничныхЦенах,
	"Детально" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СуммаЦенРозничных
ИЗ
	(ВЫБРАТЬ
		ВложенныйЗапрос.Магазин КАК Магазин,
		ВложенныйЗапрос.Номенклатура КАК Номенклатура,
		ВложенныйЗапрос.Характеристика КАК Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СУММА(ВложенныйЗапрос.Количество * ВЫБОР
				КОГДА РозничныеЦены2.Цена ЕСТЬ NULL
					ТОГДА 0
				ИНАЧЕ ВЫБОР
						КОГДА ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0) = 0
							ТОГДА РозничныеЦены2.Цена
						ИНАЧЕ РозничныеЦены2.Цена / ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0)
					КОНЕЦ
			КОНЕЦ) КАК СуммаВРозничныхЦенах
	ИЗ
		(ВЫБРАТЬ
			СписаниеИзРегистра.Магазин КАК Магазин,
			СписаниеИзРегистра.Номенклатура КАК Номенклатура,
			СписаниеИзРегистра.Характеристика КАК Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Количество КАК Количество,
			СписаниеИзРегистра.Период КАК Период,
			МАКСИМУМ(РозничныеЦены.Период) КАК ПериодИзРегистра
		ИЗ
			СписаниеИзРегистра КАК СписаниеИзРегистра
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
					ИтоговыйЗапрос.Магазин КАК Магазин,
					ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
					ИтоговыйЗапрос.Характеристика КАК Характеристика,
					ИтоговыйЗапрос.Упаковка КАК Упаковка,
					ИтоговыйЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ПодЗапрос.Магазин КАК Магазин,
						ПодЗапрос.Номенклатура КАК Номенклатура,
						ПодЗапрос.Характеристика КАК Характеристика,
						ПодЗапрос.Упаковка КАК Упаковка,
						ВЫБОР
							КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
								ТОГДА МАКСИМУМ(ПодЗапрос.ПериодПоЦеновымГруппам)
							ИНАЧЕ МАКСИМУМ(ПодЗапрос.ПериодПоВидуЦен)
						КОНЕЦ КАК Период
					ИЗ
						(ВЫБРАТЬ
							ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
							ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
							ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
							ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
							0 КАК ЦенаПоЦеновымГруппам,
							ТаблицаМагазинов.Магазин КАК Магазин,
							ЦеныНоменклатурыПоВидуЦен.Период КАК ПериодПоВидуЦен,
							ДАТАВРЕМЯ(1, 1, 1) КАК ПериодПоЦеновымГруппам
						ИЗ
							РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
								ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
						
						ОБЪЕДИНИТЬ ВСЕ
						
						ВЫБРАТЬ
							СправочникНоменклатура.Ссылка,
							ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
							ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
							0,
							ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
							ТаблицаМагазинов.Магазин,
							ДАТАВРЕМЯ(1, 1, 1),
							ЦеныНоменклатурыПоЦеновымГруппам.Период
						ИЗ
							ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
								ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
								ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
									ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
										ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
									ИЗ
										ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
									ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
								ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
									И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
					
					СГРУППИРОВАТЬ ПО
						ПодЗапрос.Номенклатура,
						ПодЗапрос.Характеристика,
						ПодЗапрос.Упаковка,
						ПодЗапрос.Магазин
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						ДействующиеЦены.ОбъектЦенообразования,
						ДействующиеЦены.Номенклатура,
						ДействующиеЦены.Характеристика,
						ДействующиеЦены.Упаковка,
						ДействующиеЦены.Период
					ИЗ
						РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
								ТаблицаМагазинов.Магазин КАК Магазин
							ИЗ
								ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
							ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены
				ПО СписаниеИзРегистра.Магазин = РозничныеЦены.Магазин
					И СписаниеИзРегистра.Номенклатура = РозничныеЦены.Номенклатура
					И СписаниеИзРегистра.Характеристика = РозничныеЦены.Характеристика
					И СписаниеИзРегистра.Период &gt;= РозничныеЦены.Период
		
		СГРУППИРОВАТЬ ПО
			СписаниеИзРегистра.Магазин,
			СписаниеИзРегистра.Номенклатура,
			СписаниеИзРегистра.Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Период,
			СписаниеИзРегистра.Количество) КАК ВложенныйЗапрос
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				ИтоговыйЗапрос.Магазин КАК Магазин,
				ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
				ИтоговыйЗапрос.Характеристика КАК Характеристика,
				ИтоговыйЗапрос.Упаковка КАК Упаковка,
				ИтоговыйЗапрос.Цена КАК Цена,
				ИтоговыйЗапрос.Период КАК Период
			ИЗ
				(ВЫБРАТЬ
					ПодЗапрос.Магазин КАК Магазин,
					ПодЗапрос.Номенклатура КАК Номенклатура,
					ПодЗапрос.Характеристика КАК Характеристика,
					ПодЗапрос.Упаковка КАК Упаковка,
					ВЫБОР
						КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
							ТОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам)
						ИНАЧЕ МАКСИМУМ(ПодЗапрос.ЦенаПоВидуЦен)
					КОНЕЦ КАК Цена,
					ПодЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
						ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
						ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
						ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
						0 КАК ЦенаПоЦеновымГруппам,
						ТаблицаМагазинов.Магазин КАК Магазин,
						ЦеныНоменклатурыПоВидуЦен.Период КАК Период
					ИЗ
						РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
							ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СправочникНоменклатура.Ссылка,
						ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
						ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
						0,
						ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
						ТаблицаМагазинов.Магазин,
						ЦеныНоменклатурыПоЦеновымГруппам.Период
					ИЗ
						ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
							ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
							ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
									ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
								ИЗ
									ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
								ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
							ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
								И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
				
				СГРУППИРОВАТЬ ПО
					ПодЗапрос.Номенклатура,
					ПодЗапрос.Характеристика,
					ПодЗапрос.Упаковка,
					ПодЗапрос.Магазин,
					ПодЗапрос.Период
				
				ОБЪЕДИНИТЬ ВСЕ
				
				ВЫБРАТЬ
					ДействующиеЦены.ОбъектЦенообразования,
					ДействующиеЦены.Номенклатура,
					ДействующиеЦены.Характеристика,
					ДействующиеЦены.Упаковка,
					ДействующиеЦены.Цена,
					ДействующиеЦены.Период
				ИЗ
					РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
							ТаблицаМагазинов.Магазин КАК Магазин
						ИЗ
							ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
						ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
						ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
							И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены2
			ПО ВложенныйЗапрос.Магазин = РозничныеЦены2.Магазин
				И ВложенныйЗапрос.Номенклатура = РозничныеЦены2.Номенклатура
				И ВложенныйЗапрос.Характеристика = РозничныеЦены2.Характеристика
				И ВложенныйЗапрос.ПериодИзРегистра = РозничныеЦены2.Период
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Магазин,
		ВложенныйЗапрос.Номенклатура,
		ВложенныйЗапрос.Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	СУММА(ВложенныйЗапрос.СебестоимостьСписания) КАК СебестоимостьСписания,
	СУММА(ВложенныйЗапрос.Количество) КАК Количество,
	СУММА(ВложенныйЗапрос.СуммаВРозничныхЦенах) КАК СуммаВРозничныхЦенах,
	ВложенныйЗапрос.Номенклатура.НоменклатурнаяГруппа КАК НоменклатурнаяГруппа,
	"Детально" КАК ИдентификаторОтчета
ИЗ
	(ВЫБРАТЬ
		СписаниеТоваров.Магазин КАК Магазин,
		СписаниеТоваров.Номенклатура КАК Номенклатура,
		СписаниеТоваров.Характеристика КАК Характеристика,
		СписаниеТоваров.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СписаниеТоваров.СебестоимостьСписания КАК СебестоимостьСписания,
		СписаниеТоваров.Количество КАК Количество,
		0 КАК СуммаВРозничныхЦенах
	ИЗ
		СписаниеТоваров КАК СписаниеТоваров
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		СуммаЦенРозничных.Магазин,
		СуммаЦенРозничных.Номенклатура,
		СуммаЦенРозничных.Характеристика,
		СуммаЦенРозничных.АналитикаХозяйственнойОперации,
		0,
		0,
		СуммаЦенРозничных.СуммаВРозничныхЦенах
	ИЗ
		СуммаЦенРозничных КАК СуммаЦенРозничных) КАК ВложенныйЗапрос

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Магазин,
	ВложенныйЗапрос.Номенклатура,
	ВложенныйЗапрос.Характеристика,
	ВложенныйЗапрос.Номенклатура.НоменклатурнаяГруппа</query>
		</item>
		<item xsi:type="DataSetQuery">
			<name>ПричиныСписанияПоТоварнымКатегориям</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>АналитикаХозяйственнойОперации</dataPath>
				<field>АналитикаХозяйственнойОперации</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВаловаяПрибыль</dataPath>
				<field>ВаловаяПрибыль</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПродажи</dataPath>
				<field>ДокументПродажи</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ИдентификаторОтчета</dataPath>
				<field>ИдентификаторОтчета</field>
				<valueType>
					<v8:Type>xs:string</v8:Type>
					<v8:StringQualifiers>
						<v8:Length>0</v8:Length>
						<v8:AllowedLength>Variable</v8:AllowedLength>
					</v8:StringQualifiers>
				</valueType>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Количество</dataPath>
				<field>Количество</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоПродаж</dataPath>
				<field>КоличествоПродаж</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Магазин</dataPath>
				<field>Магазин</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Продавец</dataPath>
				<field>Продавец</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьСписания</dataPath>
				<field>СебестоимостьСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Склад</dataPath>
				<field>Склад</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаПродаж</dataPath>
				<field>СуммаПродаж</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаСписания</dataPath>
				<field>СуммаСписания</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ТоварнаяКатегория</dataPath>
				<field>ТоварнаяКатегория</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Характеристика</dataPath>
				<field>Характеристика</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Марка</dataPath>
				<field>Марка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РегистраторСеб</dataPath>
				<field>РегистраторСеб</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор себ</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>МагазинСеб</dataPath>
				<field>МагазинСеб</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Магазин себ</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КоличествоОборот</dataPath>
				<field>КоличествоОборот</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьПродаж</dataPath>
				<field>СебестоимостьПродаж</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Себестоимость продаж</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>УслугаБанкаПериодПредоставления</dataPath>
				<field>УслугаБанкаПериодПредоставления</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СтоимостьОборот</dataPath>
				<field>СтоимостьОборот</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Стоимость оборот</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Маржинальность</dataPath>
				<field>Маржинальность</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаСкидки</dataPath>
				<field>СуммаСкидки</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма скидки</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Период</dataPath>
				<field>Период</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>УслугаБанка</dataPath>
				<field>УслугаБанка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СебестоимостьВключаетНДС</dataPath>
				<field>СебестоимостьВключаетНДС</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	Магазины.ПравилоЦенообразования КАК ПравилоЦенообразования,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновЦеныНоменклатуры
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	НЕ(Магазины.ИспользоватьПрименениеЦен
				И &amp;ИспользоватьПрименениеЦен)
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Магазины.Ссылка КАК Магазин,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ТаблицаМагазиновДействующиеЦены
ИЗ
	Справочник.Магазины КАК Магазины
ГДЕ
	Магазины.ИспользоватьПрименениеЦен
	И &amp;ИспользоватьПрименениеЦен
{ГДЕ
	Магазины.Ссылка.* КАК Магазин}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеновыеГруппы.ЦеноваяГруппа КАК ЦеноваяГруппа,
	ЦеновыеГруппы.ВидЦен КАК ВидЦен,
	ЦеновыеГруппы.Ссылка КАК ПравилоЦенообразования,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ЦеновыеГруппыПравила
ИЗ
	Справочник.ПравилаЦенообразования.ЦеновыеГруппы КАК ЦеновыеГруппы
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ЦеновыеГруппы.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования

ИНДЕКСИРОВАТЬ ПО
	ВидЦен,
	ЦеноваяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВидЦеныПравила.ВидЦен КАК ВидЦен,
	ВидЦеныПравила.Ссылка КАК ПравилоЦенообразования,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ ВидЦеныПравила
ИЗ
	Справочник.ПравилаЦенообразования КАК ВидЦеныПравила
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
		ПО ВидЦеныПравила.Ссылка = ТаблицаМагазинов.ПравилоЦенообразования
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.Количество КАК Количество,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Период КАК Период,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеИзРегистра
ИЗ
	(ВЫБРАТЬ
		ТоварыНаСкладах.Склад.Магазин КАК Магазин,
		ТоварыНаСкладах.Номенклатура КАК Номенклатура,
		ТоварыНаСкладах.Характеристика КАК Характеристика,
		СУММА(ВЫБОР
				КОГДА ТоварыНаСкладах.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
					ТОГДА ТоварыНаСкладах.Количество
				ИНАЧЕ -ТоварыНаСкладах.Количество
			КОНЕЦ) КАК Количество,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Период КАК Период
	ИЗ
		РегистрНакопления.ТоварыНаСкладах КАК ТоварыНаСкладах
	ГДЕ
		(ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеНаЗатраты)
				ИЛИ ТоварыНаСкладах.АналитикаХозяйственнойОперации.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.СписаниеПоИнвентаризации))
		И ТоварыНаСкладах.Период &gt;= &amp;НачалоПериода
		И (ТоварыНаСкладах.Период &lt;= &amp;КонецПериода
				ИЛИ &amp;КонецПериода = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0))
		И НЕ ТоварыНаСкладах.Количество = 0
	
	СГРУППИРОВАТЬ ПО
		ТоварыНаСкладах.Номенклатура,
		ТоварыНаСкладах.Склад.Магазин,
		ТоварыНаСкладах.АналитикаХозяйственнойОперации,
		ТоварыНаСкладах.Характеристика,
		ТоварыНаСкладах.Период) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СписанияиМаксимумыСебестоимости.Магазин КАК Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура КАК Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика КАК Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	СУММА(ВЫБОР
			КОГДА СписанияиМаксимумыСебестоимости.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(СебестоимостьНоменклатуры.Цена, 0)
		КОНЕЦ * СписанияиМаксимумыСебестоимости.Количество) КАК СебестоимостьСписания,
	СУММА(СписанияиМаксимумыСебестоимости.Количество) КАК Количество,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваров
ИЗ
	(ВЫБРАТЬ
		Списания.Магазин КАК Магазин,
		Списания.Номенклатура КАК Номенклатура,
		Списания.Характеристика КАК Характеристика,
		Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		Списания.Период КАК Период,
		СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
		СебестоимостьНоменклатуры.Период КАК ПериодСебестоимость,
		МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСебестоимость,
		Списания.Количество КАК Количество
	ИЗ
		(ВЫБРАТЬ
			Списания.Магазин КАК Магазин,
			Списания.Номенклатура КАК Номенклатура,
			Списания.Характеристика КАК Характеристика,
			Списания.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			Списания.Период КАК Период,
			СебестоимостьНоменклатуры.Магазин КАК МагазинСебестоимость,
			МАКСИМУМ(СебестоимостьНоменклатуры.Период) КАК ПериодСебестоимость,
			Списания.Количество КАК Количество
		ИЗ
			СписаниеИзРегистра КАК Списания
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО (Списания.Магазин = СебестоимостьНоменклатуры.Магазин
						ИЛИ СебестоимостьНоменклатуры.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
					И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И Списания.Период &gt;= СебестоимостьНоменклатуры.Период
		
		СГРУППИРОВАТЬ ПО
			СебестоимостьНоменклатуры.Магазин,
			Списания.Магазин,
			Списания.Номенклатура,
			Списания.Характеристика,
			Списания.АналитикаХозяйственнойОперации,
			Списания.Период,
			Списания.Количество) КАК Списания
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
			ПО Списания.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
				И Списания.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
				И Списания.Характеристика = СебестоимостьНоменклатуры.Характеристика
				И Списания.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
	
	СГРУППИРОВАТЬ ПО
		СебестоимостьНоменклатуры.Магазин,
		Списания.Магазин,
		Списания.Номенклатура,
		Списания.Характеристика,
		Списания.АналитикаХозяйственнойОперации,
		Списания.Период,
		Списания.Количество,
		СебестоимостьНоменклатуры.Период) КАК СписанияиМаксимумыСебестоимости
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
		ПО СписанияиМаксимумыСебестоимости.МагазинСебестоимость = СебестоимостьНоменклатуры.Магазин
			И СписанияиМаксимумыСебестоимости.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
			И СписанияиМаксимумыСебестоимости.Характеристика = СебестоимостьНоменклатуры.Характеристика
			И СписанияиМаксимумыСебестоимости.ПериодСебестоимость = СебестоимостьНоменклатуры.Период
			И СписанияиМаксимумыСебестоимости.РегистраторСебестоимость = СебестоимостьНоменклатуры.Регистратор

СГРУППИРОВАТЬ ПО
	СписанияиМаксимумыСебестоимости.Магазин,
	СписанияиМаксимумыСебестоимости.Номенклатура,
	СписанияиМаксимумыСебестоимости.Характеристика,
	СписанияиМаксимумыСебестоимости.АналитикаХозяйственнойОперации
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Магазин КАК Магазин,
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.СуммаВРозничныхЦенах КАК СуммаВРозничныхЦенах,
	"НоменклатурнаяГруппа" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СуммаЦенРозничных
ИЗ
	(ВЫБРАТЬ
		ВложенныйЗапрос.Магазин КАК Магазин,
		ВложенныйЗапрос.Номенклатура КАК Номенклатура,
		ВложенныйЗапрос.Характеристика КАК Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СУММА(ВложенныйЗапрос.Количество * ВЫБОР
				КОГДА РозничныеЦены2.Цена ЕСТЬ NULL
					ТОГДА 0
				ИНАЧЕ ВЫБОР
						КОГДА ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0) = 0
							ТОГДА РозничныеЦены2.Цена
						ИНАЧЕ РозничныеЦены2.Цена / ЕСТЬNULL(РозничныеЦены2.Упаковка.Коэффициент, 0)
					КОНЕЦ
			КОНЕЦ) КАК СуммаВРозничныхЦенах
	ИЗ
		(ВЫБРАТЬ
			СписаниеИзРегистра.Магазин КАК Магазин,
			СписаниеИзРегистра.Номенклатура КАК Номенклатура,
			СписаниеИзРегистра.Характеристика КАК Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Количество КАК Количество,
			СписаниеИзРегистра.Период КАК Период,
			МАКСИМУМ(РозничныеЦены.Период) КАК ПериодИзРегистра
		ИЗ
			СписаниеИзРегистра КАК СписаниеИзРегистра
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
					ИтоговыйЗапрос.Магазин КАК Магазин,
					ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
					ИтоговыйЗапрос.Характеристика КАК Характеристика,
					ИтоговыйЗапрос.Упаковка КАК Упаковка,
					ИтоговыйЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ПодЗапрос.Магазин КАК Магазин,
						ПодЗапрос.Номенклатура КАК Номенклатура,
						ПодЗапрос.Характеристика КАК Характеристика,
						ПодЗапрос.Упаковка КАК Упаковка,
						ВЫБОР
							КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
								ТОГДА МАКСИМУМ(ПодЗапрос.ПериодПоЦеновымГруппам)
							ИНАЧЕ МАКСИМУМ(ПодЗапрос.ПериодПоВидуЦен)
						КОНЕЦ КАК Период
					ИЗ
						(ВЫБРАТЬ
							ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
							ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
							ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
							ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
							0 КАК ЦенаПоЦеновымГруппам,
							ТаблицаМагазинов.Магазин КАК Магазин,
							ЦеныНоменклатурыПоВидуЦен.Период КАК ПериодПоВидуЦен,
							ДАТАВРЕМЯ(1, 1, 1) КАК ПериодПоЦеновымГруппам
						ИЗ
							РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
								ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
						
						ОБЪЕДИНИТЬ ВСЕ
						
						ВЫБРАТЬ
							СправочникНоменклатура.Ссылка,
							ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
							ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
							0,
							ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
							ТаблицаМагазинов.Магазин,
							ДАТАВРЕМЯ(1, 1, 1),
							ЦеныНоменклатурыПоЦеновымГруппам.Период
						ИЗ
							ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
								ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
								ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
									ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
										ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
									ИЗ
										ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
									ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
								ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
									И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
								ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
								ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
								ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
									И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
					
					СГРУППИРОВАТЬ ПО
						ПодЗапрос.Номенклатура,
						ПодЗапрос.Характеристика,
						ПодЗапрос.Упаковка,
						ПодЗапрос.Магазин
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						ДействующиеЦены.ОбъектЦенообразования,
						ДействующиеЦены.Номенклатура,
						ДействующиеЦены.Характеристика,
						ДействующиеЦены.Упаковка,
						ДействующиеЦены.Период
					ИЗ
						РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
								ТаблицаМагазинов.Магазин КАК Магазин
							ИЗ
								ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
							ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены
				ПО СписаниеИзРегистра.Магазин = РозничныеЦены.Магазин
					И СписаниеИзРегистра.Номенклатура = РозничныеЦены.Номенклатура
					И СписаниеИзРегистра.Характеристика = РозничныеЦены.Характеристика
					И СписаниеИзРегистра.Период &gt;= РозничныеЦены.Период
		
		СГРУППИРОВАТЬ ПО
			СписаниеИзРегистра.Магазин,
			СписаниеИзРегистра.Номенклатура,
			СписаниеИзРегистра.Характеристика,
			СписаниеИзРегистра.АналитикаХозяйственнойОперации,
			СписаниеИзРегистра.Период,
			СписаниеИзРегистра.Количество) КАК ВложенныйЗапрос
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				ИтоговыйЗапрос.Магазин КАК Магазин,
				ИтоговыйЗапрос.Номенклатура КАК Номенклатура,
				ИтоговыйЗапрос.Характеристика КАК Характеристика,
				ИтоговыйЗапрос.Упаковка КАК Упаковка,
				ИтоговыйЗапрос.Цена КАК Цена,
				ИтоговыйЗапрос.Период КАК Период
			ИЗ
				(ВЫБРАТЬ
					ПодЗапрос.Магазин КАК Магазин,
					ПодЗапрос.Номенклатура КАК Номенклатура,
					ПодЗапрос.Характеристика КАК Характеристика,
					ПодЗапрос.Упаковка КАК Упаковка,
					ВЫБОР
						КОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам) &gt; 0
							ТОГДА МАКСИМУМ(ПодЗапрос.ЦенаПоЦеновымГруппам)
						ИНАЧЕ МАКСИМУМ(ПодЗапрос.ЦенаПоВидуЦен)
					КОНЕЦ КАК Цена,
					ПодЗапрос.Период КАК Период
				ИЗ
					(ВЫБРАТЬ
						ЦеныНоменклатурыПоВидуЦен.Номенклатура КАК Номенклатура,
						ЦеныНоменклатурыПоВидуЦен.Характеристика КАК Характеристика,
						ЦеныНоменклатурыПоВидуЦен.Упаковка КАК Упаковка,
						ЦеныНоменклатурыПоВидуЦен.Цена КАК ЦенаПоВидуЦен,
						0 КАК ЦенаПоЦеновымГруппам,
						ТаблицаМагазинов.Магазин КАК Магазин,
						ЦеныНоменклатурыПоВидуЦен.Период КАК Период
					ИЗ
						РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоВидуЦен
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
							ПО (ВидЦеныПравила.ВидЦен = ЦеныНоменклатурыПоВидуЦен.ВидЦены)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ВидЦеныПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоВидуЦен.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоВидуЦен.Характеристика)
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СправочникНоменклатура.Ссылка,
						ЦеныНоменклатурыПоЦеновымГруппам.Характеристика,
						ЦеныНоменклатурыПоЦеновымГруппам.Упаковка,
						0,
						ЕСТЬNULL(ЦеныНоменклатурыПоЦеновымГруппам.Цена, 0),
						ТаблицаМагазинов.Магазин,
						ЦеныНоменклатурыПоЦеновымГруппам.Период
					ИЗ
						ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
							ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура
							ПО ЦеновыеГруппыПравила.ЦеноваяГруппа = СправочникНоменклатура.ЦеноваяГруппа
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатурыПоЦеновымГруппам
								ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
									ЦеновыеГруппыПравила.ВидЦен КАК ВидЦен
								ИЗ
									ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила) КАК ДоступныеВидыЦен
								ПО (ДоступныеВидыЦен.ВидЦен = ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены)
							ПО (ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура = СправочникНоменклатура.Ссылка)
								И (ЦеныНоменклатурыПоЦеновымГруппам.ВидЦены = ЦеновыеГруппыПравила.ВидЦен)
							ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаМагазиновЦеныНоменклатуры КАК ТаблицаМагазинов
							ПО (ТаблицаМагазинов.ПравилоЦенообразования = ЦеновыеГруппыПравила.ПравилоЦенообразования)
							ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
							ПО (СписаниеИзРегистра.Номенклатура = ЦеныНоменклатурыПоЦеновымГруппам.Номенклатура)
								И (СписаниеИзРегистра.Характеристика = ЦеныНоменклатурыПоЦеновымГруппам.Характеристика)) КАК ПодЗапрос
				
				СГРУППИРОВАТЬ ПО
					ПодЗапрос.Номенклатура,
					ПодЗапрос.Характеристика,
					ПодЗапрос.Упаковка,
					ПодЗапрос.Магазин,
					ПодЗапрос.Период
				
				ОБЪЕДИНИТЬ ВСЕ
				
				ВЫБРАТЬ
					ДействующиеЦены.ОбъектЦенообразования,
					ДействующиеЦены.Номенклатура,
					ДействующиеЦены.Характеристика,
					ДействующиеЦены.Упаковка,
					ДействующиеЦены.Цена,
					ДействующиеЦены.Период
				ИЗ
					РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
							ТаблицаМагазинов.Магазин КАК Магазин
						ИЗ
							ТаблицаМагазиновДействующиеЦены КАК ТаблицаМагазинов) КАК ТаблицаМагазинов2
						ПО (ТаблицаМагазинов2.Магазин = ДействующиеЦены.ОбъектЦенообразования)
						ВНУТРЕННЕЕ СОЕДИНЕНИЕ СписаниеИзРегистра КАК СписаниеИзРегистра
						ПО (СписаниеИзРегистра.Номенклатура = ДействующиеЦены.Номенклатура)
							И (СписаниеИзРегистра.Характеристика = ДействующиеЦены.Характеристика)) КАК ИтоговыйЗапрос) КАК РозничныеЦены2
			ПО ВложенныйЗапрос.Магазин = РозничныеЦены2.Магазин
				И ВложенныйЗапрос.Номенклатура = РозничныеЦены2.Номенклатура
				И ВложенныйЗапрос.Характеристика = РозничныеЦены2.Характеристика
				И ВложенныйЗапрос.ПериодИзРегистра = РозничныеЦены2.Период
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Магазин,
		ВложенныйЗапрос.Номенклатура,
		ВложенныйЗапрос.Характеристика,
		ВложенныйЗапрос.АналитикаХозяйственнойОперации) КАК ВложенныйЗапрос
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВложенныйЗапрос.Номенклатура.ТоварнаяКатегория КАК ТоварнаяКатегория,
	ВложенныйЗапрос.Номенклатура.Марка КАК Марка,
	ВложенныйЗапрос.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	СУММА(ВложенныйЗапрос.СебестоимостьСписания) КАК СебестоимостьСписания,
	СУММА(ВложенныйЗапрос.Количество) КАК Количество,
	СУММА(ВложенныйЗапрос.СуммаВРозничныхЦенах) КАК СуммаВРозничныхЦенах,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ПОМЕСТИТЬ СписаниеТоваровОбщее
ИЗ
	(ВЫБРАТЬ
		СписаниеТоваров.Магазин КАК Магазин,
		СписаниеТоваров.Номенклатура КАК Номенклатура,
		СписаниеТоваров.Характеристика КАК Характеристика,
		СписаниеТоваров.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
		СписаниеТоваров.СебестоимостьСписания КАК СебестоимостьСписания,
		СписаниеТоваров.Количество КАК Количество,
		0 КАК СуммаВРозничныхЦенах
	ИЗ
		СписаниеТоваров КАК СписаниеТоваров
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		СуммаЦенРозничных.Магазин,
		СуммаЦенРозничных.Номенклатура,
		СуммаЦенРозничных.Характеристика,
		СуммаЦенРозничных.АналитикаХозяйственнойОперации,
		0,
		0,
		СуммаЦенРозничных.СуммаВРозничныхЦенах
	ИЗ
		СуммаЦенРозничных КАК СуммаЦенРозничных) КАК ВложенныйЗапрос

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.АналитикаХозяйственнойОперации,
	ВложенныйЗапрос.Номенклатура.ТоварнаяКатегория,
	ВложенныйЗапрос.Номенклатура.Марка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЕСТЬNULL(СписаниеТоваровОбщее.СебестоимостьСписания, 0) КАК СебестоимостьСписания,
	ЕСТЬNULL(СписаниеТоваровОбщее.Количество, 0) КАК Количество,
	ЕСТЬNULL(Продажи.КоличествоОборот, 0) КАК КоличествоПродаж,
	СписаниеТоваровОбщее.АналитикаХозяйственнойОперации КАК АналитикаХозяйственнойОперации,
	ЕСТЬNULL(Продажи.ТоварнаяКатегория, СписаниеТоваровОбщее.ТоварнаяКатегория) КАК ТоварнаяКатегория,
	ЕСТЬNULL(Продажи.Марка, СписаниеТоваровОбщее.Марка) КАК Марка,
	ЕСТЬNULL(СписаниеТоваровОбщее.СуммаВРозничныхЦенах, 0) КАК СуммаСписания,
	ЕСТЬNULL(Продажи.ВаловаяПрибыль, 0) КАК ВаловаяПрибыль,
	ЕСТЬNULL(Продажи.СтоимостьОборот, 0) КАК СуммаПродаж,
	"ТоварнаяКатегория" КАК ИдентификаторОтчета
ИЗ
	СписаниеТоваровОбщее КАК СписаниеТоваровОбщее
		ПОЛНОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВложенныйЗапрос.Номенклатура.ТоварнаяКатегория КАК ТоварнаяКатегория,
			ВложенныйЗапрос.Номенклатура.Марка КАК Марка,
			СУММА(ВложенныйЗапрос.КоличествоОборот) КАК КоличествоОборот,
			СУММА(ВложенныйЗапрос.СтоимостьОборот) КАК СтоимостьОборот,
			СУММА(ЕСТЬNULL(ВЫБОР
						КОГДА ВложенныйЗапрос.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
							ТОГДА 0
						ИНАЧЕ СебестоимостьНоменклатуры.Цена
					КОНЕЦ, 0) * ВложенныйЗапрос.КоличествоОборот) КАК СебестоимостьПродаж,
			СУММА(ВложенныйЗапрос.СтоимостьОборот - ЕСТЬNULL(ВЫБОР
						КОГДА ВложенныйЗапрос.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
							ТОГДА 0
						ИНАЧЕ СебестоимостьНоменклатуры.Цена
					КОНЕЦ, 0) * ВложенныйЗапрос.КоличествоОборот) КАК ВаловаяПрибыль
		ИЗ
			(ВЫБРАТЬ
				МАКСИМУМ(СебестоимостьНоменклатуры.Регистратор) КАК РегистраторСеб,
				ВложенныйЗапрос.Номенклатура КАК Номенклатура,
				ВложенныйЗапрос.Характеристика КАК Характеристика,
				ВложенныйЗапрос.КоличествоОборот КАК КоличествоОборот,
				ВложенныйЗапрос.СтоимостьОборот КАК СтоимостьОборот,
				ВложенныйЗапрос.Магазин КАК Магазин,
				ВложенныйЗапрос.МагазинСеб КАК МагазинСеб,
				ВложенныйЗапрос.Регистратор КАК Регистратор
			ИЗ
				(ВЫБРАТЬ
					МАКСИМУМ(СебестоимостьНоменклатурыПоПериодам.Период) КАК Период,
					СебестоимостьНоменклатурыПоПериодам.Регистратор КАК РегистраторСеб,
					ПродажиОбороты.Номенклатура КАК Номенклатура,
					ПродажиОбороты.Характеристика КАК Характеристика,
					ПродажиОбороты.КоличествоОборот КАК КоличествоОборот,
					ПродажиОбороты.СтоимостьОборот КАК СтоимостьОборот,
					ПродажиОбороты.Магазин КАК Магазин,
					ПродажиОбороты.Регистратор КАК Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Магазин КАК МагазинСеб
				ИЗ
					(ВЫБРАТЬ
						ПродажиОборотыСМагазином.Номенклатура КАК Номенклатура,
						ПродажиОборотыСМагазином.Характеристика КАК Характеристика,
						ПродажиОборотыСМагазином.КоличествоОборот КАК КоличествоОборот,
						ВЫБОР
							КОГДА Константы.СебестоимостьВключаетНДС
									ИЛИ НЕ Константы.ИспользоватьУчетСебестоимости
								ТОГДА ПродажиОборотыСМагазином.СтоимостьОборот
							ИНАЧЕ ПродажиОборотыСМагазином.СтоимостьОборот - ПродажиОборотыСМагазином.НДСОборот
						КОНЕЦ КАК СтоимостьОборот,
						ПродажиОборотыСМагазином.Период КАК Период,
						ПродажиОборотыСМагазином.Регистратор КАК Регистратор,
						ПродажиОборотыСМагазином.Склад.Магазин КАК Магазин,
						Константы.СебестоимостьВключаетНДС КАК СебестоимостьВключаетНДС,
						ПродажиОборотыСМагазином.СтоимостьБезСкидокОборот - ПродажиОборотыСМагазином.СтоимостьОборот КАК СуммаСкидки
					ИЗ
						РегистрНакопления.Продажи.Обороты(&amp;НачалоПериода, &amp;КонецПериода, Регистратор, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (Продавец).* КАК Продавец, (Склад.Магазин).* КАК Магазин}) КАК ПродажиОборотыСМагазином,
						Константы КАК Константы) КАК ПродажиОбороты
						ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатурыПоПериодам
						ПО ПродажиОбороты.Период &gt;= СебестоимостьНоменклатурыПоПериодам.Период
							И ПродажиОбороты.Номенклатура = СебестоимостьНоменклатурыПоПериодам.Номенклатура
							И ПродажиОбороты.Характеристика = СебестоимостьНоменклатурыПоПериодам.Характеристика
							И (ПродажиОбороты.Магазин = СебестоимостьНоменклатурыПоПериодам.Магазин
								ИЛИ СебестоимостьНоменклатурыПоПериодам.Магазин = ЗНАЧЕНИЕ(Справочник.Магазины.ПустаяСсылка))
				
				СГРУППИРОВАТЬ ПО
					ПродажиОбороты.Номенклатура,
					ПродажиОбороты.Характеристика,
					ПродажиОбороты.КоличествоОборот,
					ПродажиОбороты.СтоимостьОборот,
					ПродажиОбороты.Магазин,
					ПродажиОбороты.Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Регистратор,
					СебестоимостьНоменклатурыПоПериодам.Магазин) КАК ВложенныйЗапрос
					ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
					ПО ВложенныйЗапрос.Период = СебестоимостьНоменклатуры.Период
						И ВложенныйЗапрос.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
						И ВложенныйЗапрос.Характеристика = СебестоимостьНоменклатуры.Характеристика
						И ВложенныйЗапрос.МагазинСеб = СебестоимостьНоменклатуры.Магазин
			
			СГРУППИРОВАТЬ ПО
				ВложенныйЗапрос.Номенклатура,
				ВложенныйЗапрос.Характеристика,
				ВложенныйЗапрос.КоличествоОборот,
				ВложенныйЗапрос.СтоимостьОборот,
				ВложенныйЗапрос.Магазин,
				ВложенныйЗапрос.МагазинСеб,
				ВложенныйЗапрос.Регистратор) КАК ВложенныйЗапрос
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СебестоимостьНоменклатуры КАК СебестоимостьНоменклатуры
				ПО ВложенныйЗапрос.РегистраторСеб = СебестоимостьНоменклатуры.Регистратор
					И ВложенныйЗапрос.Номенклатура = СебестоимостьНоменклатуры.Номенклатура
					И ВложенныйЗапрос.Характеристика = СебестоимостьНоменклатуры.Характеристика
					И ВложенныйЗапрос.МагазинСеб = СебестоимостьНоменклатуры.Магазин
		ГДЕ
			(ВложенныйЗапрос.КоличествоОборот &lt;&gt; 0
					ИЛИ ВложенныйЗапрос.СтоимостьОборот &lt;&gt; 0)
		
		СГРУППИРОВАТЬ ПО
			ВложенныйЗапрос.Номенклатура.ТоварнаяКатегория,
			ВложенныйЗапрос.Номенклатура.Марка) КАК Продажи
		ПО СписаниеТоваровОбщее.ТоварнаяКатегория = Продажи.ТоварнаяКатегория
			И СписаниеТоваровОбщее.Марка = Продажи.Марка</query>
		</item>
	</dataSet>
	<calculatedField>
		<dataPath>ДоляСписания</dataPath>
		<expression>ВЫБОР КОГДА Сумма(СуммаПродаж) = 0 ТОГДА 0
ИНАЧЕ 100* СУММА(СуммаСписания)/Сумма(СуммаПродаж)
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>От продаж, %</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>РасчетСуммыПродаж</dataPath>
		<expression>Максимум(СуммаПродаж)</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Расчет суммы продаж</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ДоляСписанияРасчет</dataPath>
		<expression>ВЫБОР КОГДА МАКСИМУМ(СуммаПродаж) = 0 ТОГДА 0
ИНАЧЕ 100* СУММА(СуммаСписания)/МАКСИМУМ(СуммаПродаж)
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Доля списания расчет</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>РасчетКоличестваПродаж</dataPath>
		<expression>Максимум(КоличествоПродаж)</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Расчет количества продаж</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>РасчетВаловаяПрибыль</dataPath>
		<expression>Максимум(ВаловаяПрибыль)</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Расчет валовая прибыль</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ДоляПрибыли</dataPath>
		<expression>ВЫБОР КОГДА Сумма(ВаловаяПрибыль) = 0 ТОГДА 0
ИНАЧЕ 100* СУММА(СуммаСписания)/Сумма(ВаловаяПрибыль)
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>От прибыли, %</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ДоляПрибылиРасчет</dataPath>
		<expression>ВЫБОР КОГДА МАКСИМУМ(ВаловаяПрибыль) = 0 ТОГДА 0
ИНАЧЕ 100* СУММА(СуммаСписания)/МАКСИМУМ(ВаловаяПрибыль)
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Доля прибыли расчет</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<group>true</group>
		</useRestriction>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>СебестоимостьЕдиницы</dataPath>
		<expression>ВЫБОР КОГДА Сумма(Количество) = 0 ТОГДА 0
ИНАЧЕ Сумма(СебестоимостьСписания) / Сумма(Количество)
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Средн. с/с-ть единицы</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>Единица</dataPath>
		<expression>Номенклатура.ЕдиницаИзмерения</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Единица</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>СуммаЕдиницы</dataPath>
		<expression>ВЫБОР КОГДА Сумма(Количество) = 0 ТОГДА 0
ИНАЧЕ Сумма(СуммаВРозничныхЦенах) / Сумма(Количество)
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Средн. розн цена</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
				<dcscor:value xsi:type="xs:decimal">10</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<totalField>
		<dataPath>Количество</dataPath>
		<expression>Сумма(Количество)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоПродаж</dataPath>
		<expression>Сумма(КоличествоПродаж)</expression>
	</totalField>
	<totalField>
		<dataPath>СебестоимостьСписания</dataPath>
		<expression>Сумма(СебестоимостьСписания)</expression>
	</totalField>
	<totalField>
		<dataPath>ДоляСписания</dataPath>
		<expression>ДоляСписания</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаСписания</dataPath>
		<expression>Сумма(СуммаСписания)</expression>
	</totalField>
	<totalField>
		<dataPath>РасчетСуммыПродаж</dataPath>
		<expression>РасчетСуммыПродаж</expression>
	</totalField>
	<totalField>
		<dataPath>ДоляСписанияРасчет</dataPath>
		<expression>ДоляСписанияРасчет</expression>
	</totalField>
	<totalField>
		<dataPath>ВаловаяПрибыль</dataPath>
		<expression>Сумма(ВаловаяПрибыль)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаПродаж</dataPath>
		<expression>Сумма(СуммаПродаж)</expression>
	</totalField>
	<totalField>
		<dataPath>РасчетКоличестваПродаж</dataPath>
		<expression>РасчетКоличестваПродаж</expression>
	</totalField>
	<totalField>
		<dataPath>РасчетВаловаяПрибыль</dataPath>
		<expression>РасчетВаловаяПрибыль</expression>
	</totalField>
	<totalField>
		<dataPath>ДоляПрибылиРасчет</dataPath>
		<expression>ДоляПрибылиРасчет</expression>
	</totalField>
	<totalField>
		<dataPath>ДоляПрибыли</dataPath>
		<expression>ДоляПрибыли</expression>
	</totalField>
	<totalField>
		<dataPath>СебестоимостьЕдиницы</dataPath>
		<expression>СебестоимостьЕдиницы</expression>
	</totalField>
	<totalField>
		<dataPath>Единица</dataPath>
		<expression>Единица</expression>
		<group>Номенклатура</group>
		<group>Характеристика</group>
	</totalField>
	<totalField>
		<dataPath>СуммаЕдиницы</dataPath>
		<expression>СуммаЕдиницы</expression>
	</totalField>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаНачала</expression>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользоватьПрименениеЦен</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать применение цен</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>ПричиныСписанияТоварныеГруппы</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причины списания (по номенклатурным группам)</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Списание</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Количество</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СебестоимостьСписания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаСписания</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Продажи</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоПродаж</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаПродаж</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ВаловаяПрибыль</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Доля списания</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДоляСписания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДоляПрибыли</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">ИдентификаторОтчета</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:string">НоменклатурнаяГруппа</dcsset:right>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">НоменклатурнаяГруппа</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.НоменклатурныеГруппы.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>0334def4-6b3c-4758-8f85-26969500781d</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Магазин</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>31f7dc16-c03b-494c-869c-a55e1d6a310d</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Продавец</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ФизическиеЛица.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>cb10a671-abcb-404e-b8f2-f90e397171c9</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Склад</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Склады.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>bfcb775e-91cf-4311-890a-775c3147ff3c</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>9668decc-0989-46dd-9e14-1ae637944c52</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Характеристика</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>51b4e91c-70fa-4c4b-ac74-fe983aaa1c2f</dcsset:userSettingID>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>f44a326b-098c-4849-a20d-02b40b740d49</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>АналитикаХозяйственнойОперации</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">АналитикаХозяйственнойОперации</dcsset:left>
							<dcsset:comparisonType>NotFilled</dcsset:comparisonType>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветТекста</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ЦветТекстаОтмененнойСтрокиДокумента</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Текст</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>&lt;не указана&gt;</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Причины списания (по номенклатурным группам)</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>НоменклатурнаяГруппа</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>АналитикаХозяйственнойОперации</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
					</dcsset:item>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
	<settingsVariant>
		<dcsset:name>ПричиныСписанияМагазины</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причины списания (по магазинам)</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Списание</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Количество</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СебестоимостьСписания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаСписания</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Продажи</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоПродаж</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаПродаж</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ВаловаяПрибыль</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Доля списания</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДоляСписания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДоляПрибыли</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">ИдентификаторОтчета</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:string">Магазины</dcsset:right>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Организации.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>a6218c94-057a-41a7-b5be-44a719255709</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Магазин</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>d80275c9-dd70-4c33-a4e1-e934716c228f</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Склад</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Склады.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>f8c3be2b-41df-40a2-ab70-503c87fb88a5</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>fc3ef952-4307-4310-b939-3e105f5a53e2</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Продавец</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ФизическиеЛица.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>b1575f20-db5c-48bf-a017-872116ab5394</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">АналитикаХозяйственнойОперации</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.АналитикаХозяйственныхОпераций.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>1583c06f-511e-4346-89a0-bf1836a6939a</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ДокументПродажи</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>3a070adc-d3dc-4197-b52c-6652dc077250</dcsset:userSettingID>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>9fa6ce79-6f4a-4c85-8dc5-f82ff12c5108</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Причины списания (по магазинам)</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Магазин</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>АналитикаХозяйственнойОперации</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
					</dcsset:item>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
	<settingsVariant>
		<dcsset:name>ПричиныСписанияДетальный</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причины списания (детально)</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СебестоимостьЕдиницы</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаЕдиницы</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Количество</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Единица</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СебестоимостьСписания</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаВРозничныхЦенах</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">ИдентификаторОтчета</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:string">Детально</dcsset:right>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">АналитикаХозяйственнойОперации</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.АналитикаХозяйственныхОпераций.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>dacf624e-31ac-4a84-8c7d-a8128636be86</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">НоменклатурнаяГруппа</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.НоменклатурныеГруппы.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>0b7b12cb-6ea4-4a10-98ed-16988b30402e</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Магазин</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>368f78a5-eee9-451a-9949-a87023d2fec2</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>f8a3e35b-7427-4d49-b9ff-ea4f8bc9af9c</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Характеристика</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>afc23ea7-2c5f-4633-835d-b7833becfbf4</dcsset:userSettingID>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>c79742bd-3d06-4363-bad5-40a75e450597</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Причины списания (детально)</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>Магазин</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
				<dcsset:item xsi:type="dcsset:StructureItemGroup">
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>АналитикаХозяйственнойОперации</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item xsi:type="dcsset:StructureItemGroup">
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>Номенклатура</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>Характеристика</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
					</dcsset:item>
				</dcsset:item>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
	<settingsVariant>
		<dcsset:name>ПричиныСписанияТоварныеКатегории</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причины списания (по товарным категориям)</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Марка</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Марка (бренд)</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Списание</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Количество</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СебестоимостьСписания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаСписания</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Продажи</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоПродаж</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаПродаж</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ВаловаяПрибыль</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Доля списания</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДоляСписания</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ДоляПрибыли</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">ИдентификаторОтчета</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:string">ТоварнаяКатегория</dcsset:right>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Магазин</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>31f7dc16-c03b-494c-869c-a55e1d6a310d</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ТоварнаяКатегория</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ТоварныеКатегории.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>a1f65c11-0df9-460b-bed9-e532ee2b7fa0</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Марка</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>06e8d141-e0aa-4c7b-80f3-aecde6c1a309</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Марка (бренд)</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>f44a326b-098c-4849-a20d-02b40b740d49</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>АналитикаХозяйственнойОперации</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">АналитикаХозяйственнойОперации</dcsset:left>
							<dcsset:comparisonType>NotFilled</dcsset:comparisonType>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветТекста</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ЦветТекстаОтмененнойСтрокиДокумента</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Текст</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>&lt;не указана&gt;</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Причины списания (по товарным категориям)</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ТоварнаяКатегория</dcsset:field>
							<dcsset:groupType>Hierarchy</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>Марка</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item>
							<dcsset:groupItems>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>АналитикаХозяйственнойОперации</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
							</dcsset:groupItems>
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
						</dcsset:item>
					</dcsset:item>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>