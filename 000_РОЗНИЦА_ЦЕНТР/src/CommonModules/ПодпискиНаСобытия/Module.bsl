// Обновление цен номенклатуры в ТСД

Процедура ПриЗаписиПрименениеЦенПриЗаписи(Источник, Отказ) Экспорт
	
	Попытка	
	
		
		Запрос = Новый Запрос;
		Запрос.Текст = 
			"ВЫБРАТЬ
			|	ПараметрыСоединения.ServerAddress
			|ИЗ
			|	РегистрСведений.ПараметрыСоединения КАК ПараметрыСоединения
			|ГДЕ
			|	ПараметрыСоединения.Активен = ИСТИНА
			|	И ПараметрыСоединения.Источник = &Источник";
		
		Запрос.УстановитьПараметр("Источник", Перечисления.ВнешниеИсточники.TerminalDataCollection);
		
		РезультатЗапроса = Запрос.Выполнить();
		
		Если НЕ РезультатЗапроса.Пустой() тогда	
		
		
		
		
				
			НаборЗаписей = РегистрыСведений.ВыгрузкаЦенВТСД.СоздатьНаборЗаписей(); 

			НаборЗаписей.Отбор.ДокПрименениеЦен.Установить(Источник.Ссылка);

			НоваяЗапись = НаборЗаписей.Добавить();
			НоваяЗапись.ДокПрименениеЦен = Источник.Ссылка;

			НаборЗаписей.Записать();
		КонецЕсли;
	Исключение
	КонецПопытки;

КонецПроцедуры
