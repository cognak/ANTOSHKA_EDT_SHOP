#Область ОписаниеПеременных

#КонецОбласти

#Область ОбработчикиСобытийФормы
// Код процедур и функций
#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы
// Код процедур и функций
#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОбновитьСправочник(Команда)
	ОбновитьСправочникНаСервере();
КонецПроцедуры

&НаКлиенте
Процедура ОбновитьУлицы(Команда)

	ТекДанные = Элементы.Список.ТекущиеДанные;
	
	Если Не ТекДанные = Неопределено Тогда
		ОбновитьУлицыНаСервере(ТекДанные.Ссылка);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ОбновитьСправочникНаСервере()
	
	ТаблицаМетодов = Неопределено;
	ОбменНПСервер.ЗаполнитьСправочникиНП(ТаблицаМетодов, "getCities");
	
КонецПроцедуры

&НаСервере
Процедура ОбновитьУлицыНаСервере(ГородДляУлиц)

	ТаблицаМетодов = Неопределено;
	ПараметрыПоиска = Новый Структура("ГородЗагрузки", ГородДляУлиц);
	ОбменНПСервер.ЗаполнитьСправочникиНП(ТаблицаМетодов, "getStreet", ПараметрыПоиска);

КонецПроцедуры
#КонецОбласти