#Область ОбработчикиОсновныхСобытийОбъекта

Процедура ПередЗаписью(Отказ)

	Если ОбменДанными.Загрузка Тогда

		Возврат;

	КонецЕсли;

	Если НЕ ЭтоГруппа Тогда

		Если ПустаяСтрока(Наименование) Тогда

			Наименование = СокрЛП(ТипУслуги) + ?(ПериодПредоставления = 0, "", " на " + СокрЛП(ПериодПредоставления) + " мес.");

		КонецЕсли;

		Если ПометкаУдаления И НЕ Блокирован Тогда

			Блокирован = Истина;

		КонецЕсли;

		Если ТипУслуги = Перечисления.ТипыУслугБанка.МгновеннаяРассрочка Тогда

			ПериодПредоставления = 0;
			Эквайрер = Неопределено;

		КонецЕсли;

	КонецЕсли;

КонецПроцедуры

Процедура ПриЗаписи(Отказ)

	Если ОбменДанными.Загрузка Тогда

		Возврат;

	КонецЕсли;


КонецПроцедуры

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)

	Если ТипЗнч(ДанныеЗаполнения) = Тип("Структура") Тогда

		ДанныеЗаполнения.Свойство("ТипУслуги", ТипУслуги);

	КонецЕсли;

КонецПроцедуры

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)

	Если ТипУслуги = Перечисления.ТипыУслугБанка.МгновеннаяРассрочка
			Или ТипУслуги = Перечисления.ТипыУслугБанка.ПакетМалыша
			Или ТипУслуги = Перечисления.ТипыУслугБанка.ПакетШкольника Тогда

		МассивНепроверяемыхРеквизитов = Новый Массив;
		МассивНепроверяемыхРеквизитов.Добавить("ПериодПредоставления");
		МассивНепроверяемыхРеквизитов.Добавить("Эквайрер");
		ОбщегоНазначения.УдалитьНепроверяемыеРеквизитыИзМассива(ПроверяемыеРеквизиты, МассивНепроверяемыхРеквизитов);

	КонецЕсли;

КонецПроцедуры
	
#КонецОбласти
