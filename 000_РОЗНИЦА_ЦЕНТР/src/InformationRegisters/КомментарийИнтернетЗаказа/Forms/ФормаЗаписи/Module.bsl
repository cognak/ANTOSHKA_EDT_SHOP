
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Параметры.Свойство("ПросмотрКомментария") Тогда 
		ТолькоПросмотр = Истина;
		Запись.Автор = Параметры.ДанныеДляПросмотра.Автор;
		Запись.ДокументКоментария = Параметры.ЗаказКлиента;
		Запись.Комментарий = Параметры.ДанныеДляПросмотра.Комментарий; 
		Важный = ?(Параметры.ДанныеДляПросмотра.СтатусКомментария = Перечисления.СтатусыКомментария.Важные, 2, 1);
	Иначе
		Если Параметры.Свойство("ЗаказКлиента") Тогда 
			Запись.ДокументКоментария = Параметры.ЗаказКлиента;
		КонецЕсли;
		
		Запись.Автор = ПараметрыСеанса.ТекущийПользователь;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
	Если Не ТолькоПросмотр Тогда 
		Запись.Период = ТекущаяДата();  
		Запись.СтатусКомментария = ?(Важный = 1
									, ПредопределенноеЗначение("Перечисление.СтатусыКомментария.Пользовательское")
									, ПредопределенноеЗначение("Перечисление.СтатусыКомментария.Важные"));
	КонецЕсли;  
КонецПроцедуры

&НаКлиенте
Процедура ВажныйПриИзменении(Элемент)
	// Вставить содержимое обработчика.
КонецПроцедуры
